{"version":3,"sources":["../../src/FilterEngine/_FilterRange.js"],"names":["_FilterRange","prop","filters","filter","index","onApply","noModal","onChange","onActive","className","height","item","setItem","_onOpen","open","_handleBlur","field","_item","change","from","Number","rangeTextValues","min","max","rangeValue","range","_onChange","vls","_onChangeCommitted","isActive","JSON","stringify","_handleFocus","_handleChange","value","replaceValue","replace","maskOptions","prefix","newRange","_onApply","v","filterTitle","_onReset","rangeTitleValues","cleanFilterOnClose","_onClose","label"],"mappings":"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","sourcesContent":["import clsx from \"clsx\";\nimport React, { useEffect, useState } from \"react\";\nimport FilterRange from \"../FilterRange/FilterRange\";\n\nconst _FilterRange = prop => {\n    const {\n        filters,\n        filter,\n        index,\n        onApply,\n        noModal,\n        onChange,\n        onActive,\n        className,\n        height,\n    } = prop;\n\n    const [item, setItem] = useState({ ...filter });\n\n    const _onOpen = () => {\n        setItem(item => ({ ...item, open: true }));\n    };\n\n    const _handleBlur = field => {\n        setItem(item => {\n            const _item = { ...item };\n            let change = false;\n            const from = Number(_item.rangeTextValues[field]);\n            const min = Number(_item.min);\n            const max = Number(_item.max);\n\n            if (field === \"min\") change = !(from >= min && from <= max);\n            if (field === \"max\") change = !(from <= max && from >= min);\n\n            if (from === 0 && _item.rangeValue[field] !== _item[field]) {\n                _item.rangeTextValues[field] = _item.rangeValue[field];\n            } else {\n                if (change) {\n                    _item.rangeTextValues[field] = _item[field];\n                    _item.rangeValue[field] = _item[field];\n                }\n\n                if (_item.rangeTextValues.max < _item.rangeTextValues.min && !change) {\n                    change = true;\n                    const range = { ..._item.rangeTextValues };\n                    _item.rangeTextValues.min = range.max;\n                    _item.rangeTextValues.max = range.min;\n                    _item.rangeValue.min = range.max;\n                    _item.rangeValue.max = range.min;\n                }\n            }\n\n            if (!change) _item.rangeValue[field] = from;\n\n            return _item;\n        });\n    };\n\n    const _onChange = vls => {\n        setItem(item => ({ ...item, rangeValue: vls, rangeTextValues: vls }));\n    };\n\n    const _onChangeCommitted = vls => {\n        setItem(item => {\n            const _item = {\n                ...item,\n                rangeValue: vls,\n                rangeTextValues: vls,\n                isActive: JSON.stringify({ min: item.min, max: item.max }) !==\n                    JSON.stringify(vls)\n            };\n            if (onChange) onChange(_item);\n            if (onActive)\n                onActive(_item.isActive);\n\n            return _item;\n        });\n    };\n\n    const _handleFocus = field => {\n        setItem(item => ({\n            ...item,\n            rangeTextValues:\n                field === \"min\"\n                    ? { min: \"\", max: item.rangeValue.max }\n                    : { min: item.rangeValue.min, max: \"\" },\n        }));\n    };\n\n    const _handleChange = (value, field) => {\n        const replaceValue = value.replace(item.maskOptions.prefix, \"\").replace(\".\", \"\");\n        if (Number(replaceValue) || replaceValue === 0 || replaceValue === \"\") {\n            const newRange = {\n                min: field === \"min\" ? Number(replaceValue) : item.rangeTextValues.min,\n                max: field === \"max\" ? Number(replaceValue) : item.rangeTextValues.max\n            };\n            setItem(item => {\n                const _item = {\n                    ...item,\n                    rangeValue: newRange,\n                    rangeTextValues: newRange,\n                    isActive: JSON.stringify({ min: item.min, max: item.max }) !==\n                    JSON.stringify(newRange)\n                };\n                if (onChange) onChange(_item);\n                if (onActive)\n                    onActive(_item.isActive);\n\n                return _item;\n            });\n        }\n    };\n\n    const _onApply = v => {\n        setItem(item => {\n            const _item = { ...item, open: false, filterTitle: v };\n            filters[index] = _item;\n            onApply(filters);\n            return _item;\n        });\n    };\n\n    const _onReset = () => {\n        setItem(item => {\n            const _item = { ...filter };\n\n            _item.open = item.open;\n            _item.rangeTextValues = { min: _item.min, max: _item.max };\n            _item.rangeTitleValues = { min: _item.min, max: _item.max };\n            _item.rangeValue = { min: _item.min, max: _item.max };\n            _item.filterTitle = \"\";\n\n            filters[index] = _item;\n            onApply(filters);\n            return _item;\n        });\n    };\n\n    const cleanFilterOnClose = () => {\n        if (!item.filterTitle) {\n            setItem(item => {\n                const _item = {\n                    ...item,\n                    rangeValue: filter.rangeValue,\n                    rangeTextValues: filter.rangeTextValues,\n                    isActive: false\n                };\n                if (onChange) onChange(_item);\n                if (onActive) onActive(_item.isActive);\n\n                return _item;\n            });\n        }\n    };\n\n    const _onClose = () => {\n        cleanFilterOnClose();\n        setItem(item => ({ ...item, open: false }));\n    };\n\n    return (\n        <FilterRange\n            filterTitle={item.filterTitle}\n            onOpen={_onOpen}\n            onClose={_onClose}\n            onChange={_onChange}\n            onChangeCommitted={_onChangeCommitted}\n            handleFocus={_handleFocus}\n            handleBlur={_handleBlur}\n            handleChange={_handleChange}\n            onApply={_onApply}\n            onReset={_onReset}\n            label={item.label}\n            rangeTitleValues={item.rangeTitleValues}\n            rangeTextValues={item.rangeTextValues}\n            rangeValue={item.rangeValue}\n            maskOptions={item.maskOptions}\n            step={10}\n            open={item.open}\n            noModal={noModal}\n            values={{ min: item.min, max: item.max }}\n            className={clsx(className, `FilterRange-item-${index}`)}\n            height={height}\n        />\n    );\n};\n\nexport default _FilterRange;\n"],"file":"_FilterRange.js"}