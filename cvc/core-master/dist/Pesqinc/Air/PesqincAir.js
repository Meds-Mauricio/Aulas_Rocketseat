"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _withStyles=_interopRequireDefault(require("@material-ui/core/styles/withStyles"));var _ListItem=_interopRequireDefault(require("@material-ui/core/ListItem"));var _InputBase=_interopRequireDefault(require("@material-ui/core/InputBase"));var _List=_interopRequireDefault(require("@material-ui/core/List"));var _Air=_interopRequireDefault(require("@cvccorp-components/icons/dist/Air"));var _Hotel=_interopRequireDefault(require("@cvccorp-components/icons/dist/Hotel"));var _Local=_interopRequireDefault(require("@cvccorp-components/icons/dist/Local"));var _Clock=_interopRequireDefault(require("@cvccorp-components/icons/dist/Clock"));var _Close=_interopRequireDefault(require("@material-ui/icons/Close"));var _ArrowLeft=_interopRequireDefault(require("@cvccorp-components/icons/dist/ArrowLeft"));var _Typography=_interopRequireDefault(require("../../Typography"));var _Box=_interopRequireDefault(require("../../Box"));var _TextField=_interopRequireDefault(require("../../TextField"));var _Overlay=_interopRequireDefault(require("../../Overlay"));var _styles=require("../styles");var _colors=require("@material-ui/core/colors");var _clsx=_interopRequireDefault(require("clsx"));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var PesqincAir=function PesqincAir(props){var classes=props.classes,onChange=props.onChange,onFocus=props.onFocus,onClose=props.onClose,onSelect=props.onSelect,value=props.value,iata=props.iata,selectedIndex=props.selectedIndex,searchOrigin=props.searchOrigin,alignRight=props.alignRight,label=props.label,resetValue=props.resetValue;var _useState=(0,_react.useState)(selectedIndex||0),_useState2=(0,_slicedToArray2["default"])(_useState,2),index=_useState2[0],setIndex=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2["default"])(_useState3,2),searching=_useState4[0],setSearching=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=(0,_slicedToArray2["default"])(_useState5,2),selectedItem=_useState6[0],setSelectedItem=_useState6[1];var handleSelect=function handleSelect(item,index){setSearching(false);setSelectedItem(item);onSelect(item,index)};var handleKeyUp=function handleKeyUp(e){if(props.search&&props.search.length>0){if(e.keyCode===40)setIndex((index+1)%props.search.length);else if(e.keyCode===38)setIndex((index-1+props.search.length)%props.search.length);else if(e.keyCode===13&&searching)onSelect(props.search[index])}};var handleChange=function handleChange(e){if(onChange)onChange(e)};var handleFocus=function handleFocus(e){setSearching(true);if(onFocus)onFocus(e)};var handleClose=function handleClose(){if(!selectedItem||value!==selectedItem.name){setSelectedItem(null)}setSearching(false);if(onClose)onClose(selectedItem)};var handleReset=function handleReset(){resetValue()};var focusInputField=function focusInputField(input){if(searching&&input)input.focus()};function mapValuesToComponents(){var returnValue=[];var _iterator=_createForOfIteratorHelper(props.groupedDestinations),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=(0,_slicedToArray2["default"])(_step.value,2),k=_step$value[0],_value=_step$value[1];_value.forEach(function(v,i){returnValue.push(/*#__PURE__*/_react["default"].createElement("div",{key:v.key.i},/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:v.key.i,className:i===0?classes.listItem:classes.sublistItem,button:true,selected:i===v.key.i,onClick:function onClick(){return handleSelect(v,i)}},v.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),v.type==="location"&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),v.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},v.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",v.address))),v.near&&v.near.map(function(subitem,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:"".concat(classes.listItem," ").concat(classes.sublistItem),button:true,onClick:function onClick(){return handleSelect(subitem,i)}},subitem.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),subitem.type==="location"&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),subitem.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},subitem.name,/*#__PURE__*/_react["default"].createElement("span",null,subitem.name)),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",subitem.address)))})))})}}catch(err){_iterator.e(err)}finally{_iterator.f()}return returnValue}return/*#__PURE__*/_react["default"].createElement("div",{className:classes.container},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"headline5",className:(0,_clsx["default"])(alignRight?classes.labelIataRight:classes.labelIata,"\"data-test"&&searchOrigin?"data-test=\"flights-search-to-input\"":"data-test=\"flights-search-origin-iata\"")},iata),/*#__PURE__*/_react["default"].createElement(_TextField["default"],{label:label&&searchOrigin?"De onde vai sair?":"Para onde vai?",size:"large",transparent:true,value:value,onClick:handleFocus,onChange:handleChange,onKeyUp:handleKeyUp,inputClassName:alignRight?classes.inputPkgRight:classes.inputPkg,labelClassName:alignRight?classes.inputLabelRight:classes.inputLabel,error:props.error,errorMsg:props.errorMsg,disabled:true,noBorder:true}),searching&&handleClose&&/*#__PURE__*/_react["default"].createElement(_Overlay["default"],{onClick:handleClose}),/*#__PURE__*/_react["default"].createElement(_Box["default"],{className:"".concat(classes.root," ").concat(classes.rootPkg," ").concat(!searching&&classes.closed)},/*#__PURE__*/_react["default"].createElement("div",{className:classes.internalInput},props.isMobile?/*#__PURE__*/_react["default"].createElement("a",{onClick:handleClose},/*#__PURE__*/_react["default"].createElement(_ArrowLeft["default"],null)):/*#__PURE__*/_react["default"].createElement(_Local["default"],null),/*#__PURE__*/_react["default"].createElement(_InputBase["default"],{placeholder:searchOrigin?"De onde vai sair?":"Para onde vai?",value:value,onFocus:handleFocus,onChange:handleChange,onKeyUp:function onKeyUp(e){return handleKeyUp(e,value)},className:classes.flexGrow,inputRef:focusInputField,"data-test":"data-test"&&searchOrigin?"flights-search-from-input":"flights-search-to-input"}),/*#__PURE__*/_react["default"].createElement(_Close["default"],{onClick:handleReset})),/*#__PURE__*/_react["default"].createElement("div",{className:classes.boxResult},!props.history&&(!props.search||props.search.length===0)&&!props.mostSearched&&/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.listItemTitle},"Continue digitando\u2026"),/*#__PURE__*/_react["default"].createElement(_List["default"],{component:"nav",className:classes.list},props.search&&props.search.length>0&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"Voc\xEA est\xE1 buscando por\u2026")),/*#__PURE__*/_react["default"].createElement("div",{className:"".concat(!props.isMobile&&classes.heightLimit," ").concat(classes.scrolling)},props.groupedDestinations&&mapValuesToComponents()),props.history&&!(props.search&&props.search.length>0)&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"\xDAltimas buscas")),props.history&&!(props.search&&props.search.length>0)&&props.history.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,onClick:function onClick(){return handleSelect(item,i)}},/*#__PURE__*/_react["default"].createElement(_Clock["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",item.address)))}),props.mostSearched&&!(props.search&&props.search.length>0)&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"Destinos mais buscados")),props.mostSearched&&!(props.search&&props.search.length>0)&&props.mostSearched.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,onClick:function onClick(){return handleSelect(item,i)}},item.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),(item.type==="location"||!item.type)&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),item.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",item.address)))})))))};PesqincAir.propTypes={classes:_propTypes["default"].object.isRequired,search:_propTypes["default"].array,history:_propTypes["default"].array,mostSearched:_propTypes["default"].array,groupedDestinations:_propTypes["default"].object};var _default=(0,_withStyles["default"])(_styles.styles,{withTheme:true})(PesqincAir);exports["default"]=_default;
//# sourceMappingURL=PesqincAir.js.map