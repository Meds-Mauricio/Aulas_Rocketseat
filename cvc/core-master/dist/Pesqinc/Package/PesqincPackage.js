"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _withStyles=_interopRequireDefault(require("@material-ui/core/styles/withStyles"));var _ListItem=_interopRequireDefault(require("@material-ui/core/ListItem"));var _InputBase=_interopRequireDefault(require("@material-ui/core/InputBase"));var _List=_interopRequireDefault(require("@material-ui/core/List"));var _Air=_interopRequireDefault(require("@cvccorp-components/icons/dist/Air"));var _Hotel=_interopRequireDefault(require("@cvccorp-components/icons/dist/Hotel"));var _Local=_interopRequireDefault(require("@cvccorp-components/icons/dist/Local"));var _Clock=_interopRequireDefault(require("@cvccorp-components/icons/dist/Clock"));var _ArrowLeft=_interopRequireDefault(require("@cvccorp-components/icons/dist/ArrowLeft"));var _Typography=_interopRequireDefault(require("../../Typography"));var _Box=_interopRequireDefault(require("../../Box"));var _TextField=_interopRequireDefault(require("../../TextField"));var _Overlay=_interopRequireDefault(require("../../Overlay"));var _styles=require("../styles");var _Close=_interopRequireDefault(require("@material-ui/icons/Close"));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}var PesqincPackage=function PesqincPackage(props){var classes=props.classes,onChange=props.onChange,onFocus=props.onFocus,onClose=props.onClose,onSelect=props.onSelect,value=props.value,iata=props.iata,selectedIndex=props.selectedIndex,label=props.label,alignRight=props.alignRight,resetValue=props.resetValue;var _useState=(0,_react.useState)(selectedIndex||0),_useState2=(0,_slicedToArray2["default"])(_useState,2),index=_useState2[0],setIndex=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2["default"])(_useState3,2),searching=_useState4[0],setSearching=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=(0,_slicedToArray2["default"])(_useState5,2),selectedItem=_useState6[0],setSelectedItem=_useState6[1];var handleSelect=function handleSelect(item,i){setSearching(false);setSelectedItem(item);onSelect(item,i)};var handleKeyUp=function handleKeyUp(e){if(props.search&&props.search.length>0){if(e.keyCode===40)setIndex((index+1)%props.search.length);else if(e.keyCode===38)setIndex((index-1+props.search.length)%props.search.length);else if(e.keyCode===13&&searching)onSelect(props.search[index])}};var handleChange=function handleChange(e){if(onChange)onChange(e)};var handleFocus=function handleFocus(e){setSearching(true);if(onFocus)onFocus(e)};var handleClose=function handleClose(){if(!selectedItem||value!==selectedItem.name){setSelectedItem(null)}setSearching(false);if(onClose)onClose(selectedItem)};var focusInputField=function focusInputField(input){if(searching&&input)input.focus()};var handleReset=function handleReset(){resetValue()};return/*#__PURE__*/_react["default"].createElement("div",{className:classes.container},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"headline5",className:alignRight?classes.labelIataRight:classes.labelIata},iata),/*#__PURE__*/_react["default"].createElement(_TextField["default"],{label:label||"Para onde vai?",size:"large",transparent:true,value:value,onClick:handleFocus,onChange:handleChange,onKeyUp:handleKeyUp,inputClassName:alignRight?classes.inputPkgRight:classes.inputPkg,labelClassName:alignRight?classes.inputLabelRight:classes.inputLabel,error:props.error,errorMsg:props.errorMsg,disabled:true,noBorder:true}),searching&&handleClose&&/*#__PURE__*/_react["default"].createElement(_Overlay["default"],{onClick:handleClose}),/*#__PURE__*/_react["default"].createElement(_Box["default"],{className:"".concat(classes.root," ").concat(classes.rootPkg," ").concat(!searching&&classes.closed)},/*#__PURE__*/_react["default"].createElement("div",{className:classes.internalInput},props.isMobile?/*#__PURE__*/_react["default"].createElement("a",{onClick:handleClose},/*#__PURE__*/_react["default"].createElement(_ArrowLeft["default"],null)):/*#__PURE__*/_react["default"].createElement(_Local["default"],null),/*#__PURE__*/_react["default"].createElement(_InputBase["default"],{placeholder:label||"Para onde vai?",value:value,onFocus:handleFocus,onChange:handleChange,onKeyUp:function onKeyUp(e){return handleKeyUp(e,value)},className:classes.flexGrow,inputRef:focusInputField}),/*#__PURE__*/_react["default"].createElement(_Close["default"],{onClick:handleReset})),/*#__PURE__*/_react["default"].createElement("div",{className:classes.boxResult},!props.history&&(!props.search||props.search.length===0)&&!props.mostSearched&&/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.listItemTitle},"Continue digitando\u2026"),/*#__PURE__*/_react["default"].createElement(_List["default"],{component:"nav",className:classes.list},props.search&&props.search.length>0&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"Voc\xEA est\xE1 buscando por\u2026")),/*#__PURE__*/_react["default"].createElement("div",{className:"".concat(!props.isMobile&&classes.heightLimit," ").concat(classes.scrolling)},props.search&&props.search.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,selected:i===index,onClick:function onClick(){return handleSelect(item,i)}},item.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),item.type==="location"&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),item.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",item.address))),item.near&&item.near.map(function(subitem,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:"".concat(classes.listItem," ").concat(classes.sublistItem),button:true,onClick:function onClick(){return handleSelect(subitem,i)}},subitem.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),subitem.type==="location"&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),subitem.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},subitem.name,/*#__PURE__*/_react["default"].createElement("span",null,subitem.name)),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",subitem.address)))}))})),props.history&&!(props.search&&props.search.length>0)&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"\xDAltimas buscas")),props.history&&!(props.search&&props.search.length>0)&&props.history.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,onClick:function onClick(){return handleSelect(item,i)}},/*#__PURE__*/_react["default"].createElement(_Clock["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",item.address)))}),props.mostSearched&&!(props.search&&props.search.length>0)&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"Destinos mais buscados")),props.mostSearched&&!(props.search&&props.search.length>0)&&props.mostSearched.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,onClick:function onClick(){return handleSelect(item,i)}},item.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),(item.type==="location"||!item.type)&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),item.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adress,type:"body2regular"}," ",item.address)))})))))};PesqincPackage.propTypes={classes:_propTypes["default"].object.isRequired,search:_propTypes["default"].array,history:_propTypes["default"].array,mostSearched:_propTypes["default"].array};var _default=(0,_withStyles["default"])(_styles.styles,{withTheme:true})(PesqincPackage);exports["default"]=_default;
//# sourceMappingURL=PesqincPackage.js.map