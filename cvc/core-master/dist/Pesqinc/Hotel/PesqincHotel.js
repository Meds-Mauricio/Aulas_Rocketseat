"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _withStyles=_interopRequireDefault(require("@material-ui/core/styles/withStyles"));var _ListItem=_interopRequireDefault(require("@material-ui/core/ListItem"));var _InputBase=_interopRequireDefault(require("@material-ui/core/InputBase"));var _List=_interopRequireDefault(require("@material-ui/core/List"));var _Air=_interopRequireDefault(require("@cvccorp-components/icons/dist/Air"));var _Hotel=_interopRequireDefault(require("@cvccorp-components/icons/dist/Hotel"));var _Local=_interopRequireDefault(require("@cvccorp-components/icons/dist/Local"));var _Clock=_interopRequireDefault(require("@cvccorp-components/icons/dist/Clock"));var _ArrowLeft=_interopRequireDefault(require("@cvccorp-components/icons/dist/ArrowLeft"));var _Typography=_interopRequireDefault(require("../../Typography"));var _Box=_interopRequireDefault(require("../../Box"));var _TextField=_interopRequireDefault(require("../../TextField"));var _Overlay=_interopRequireDefault(require("../../Overlay"));var _Animate=_interopRequireDefault(require("../../Animate"));var _styles=require("../styles");var _Close=_interopRequireDefault(require("@material-ui/icons/Close"));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}var PesqincHotel=function PesqincHotel(_ref){var classes=_ref.classes,onChange=_ref.onChange,onFocus=_ref.onFocus,onClose=_ref.onClose,onSelect=_ref.onSelect,value=_ref.value,selectedIndex=_ref.selectedIndex,transparent=_ref.transparent,search=_ref.search,isMobile=_ref.isMobile,error=_ref.error,errorMsg=_ref.errorMsg,history=_ref.history,mostSearched=_ref.mostSearched,resetValue=_ref.resetValue;var _useState=(0,_react.useState)(selectedIndex||0),_useState2=(0,_slicedToArray2["default"])(_useState,2),index=_useState2[0],setIndex=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2["default"])(_useState3,2),searching=_useState4[0],setSearching=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=(0,_slicedToArray2["default"])(_useState5,2),selectedItem=_useState6[0],setSelectedItem=_useState6[1];var _useState7=(0,_react.useState)(false),_useState8=(0,_slicedToArray2["default"])(_useState7,2),loaded=_useState8[0],setLoaded=_useState8[1];(0,_react.useEffect)(function(){setLoaded(true)},[]);var handleSelect=function handleSelect(item,index){setSearching(false);setSelectedItem(item);onSelect(item,index)};var handleKeyUp=function handleKeyUp(e){if(search&&search.length>0){if(e.keyCode===40)setIndex((index+1)%search.length);else if(e.keyCode===38)setIndex((index-1+search.length)%search.length);else if(e.keyCode===13&&searching){onSelect(search[index]);setSearching(false)}}};var handleChange=function handleChange(e){if(onChange)onChange(e)};var handleFocus=function handleFocus(e){setSearching(true);if(onFocus)onFocus(e)};var handleClose=function handleClose(){if(window!==undefined&&isMobile){window.scrollTo(0,0)}if(!selectedItem||value!==selectedItem.name){setSelectedItem(null)}setSearching(false);if(onClose)onClose(selectedItem)};var _useState9=(0,_react.useState)(false),_useState10=(0,_slicedToArray2["default"])(_useState9,2),isOpenAnimation=_useState10[0],setOpenAnimation=_useState10[1];var onOpenAnimate=function onOpenAnimate(){setOpenAnimation(true);document.getElementById("pesqinc-input").focus()};var onCloseAnimate=function onCloseAnimate(){setOpenAnimation(false)};var handleReset=function handleReset(){resetValue()};return/*#__PURE__*/_react["default"].createElement("div",{className:classes.container},loaded&&/*#__PURE__*/_react["default"].createElement(_TextField["default"],{label:"Para onde vai?",size:"large",transparent:transparent,value:value,onClick:handleFocus,onChange:handleChange,onKeyUp:handleKeyUp,inputClassName:classes.input,labelClassName:classes.input,error:error,errorMsg:errorMsg,icon:/*#__PURE__*/_react["default"].createElement(_Local["default"],null),disabled:true,noBorder:true}),/*#__PURE__*/_react["default"].createElement(_Animate["default"],{isOpen:searching,onOpen:onOpenAnimate,onClose:onCloseAnimate},handleClose&&/*#__PURE__*/_react["default"].createElement(_Overlay["default"],{onClick:handleClose}),/*#__PURE__*/_react["default"].createElement(_Box["default"],{className:"".concat(classes.root," ").concat(!isOpenAnimation&&classes.closed)},/*#__PURE__*/_react["default"].createElement("div",{className:classes.internalInput},isMobile?/*#__PURE__*/_react["default"].createElement("a",{onClick:handleClose},/*#__PURE__*/_react["default"].createElement(_ArrowLeft["default"],null)):/*#__PURE__*/_react["default"].createElement(_Local["default"],null),/*#__PURE__*/_react["default"].createElement(_InputBase["default"],{placeholder:"Para onde vai?",value:value,onFocus:handleFocus,onChange:handleChange,onKeyUp:function onKeyUp(e){return handleKeyUp(e,value)},className:classes.flexGrow,id:"pesqinc-input"}),/*#__PURE__*/_react["default"].createElement(_Close["default"],{onClick:handleReset})),/*#__PURE__*/_react["default"].createElement("div",{className:classes.boxResult},!history&&(!search||search.length===0)&&!mostSearched&&/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.listItemTitle},"Continue digitando\u2026"),/*#__PURE__*/_react["default"].createElement(_List["default"],{component:"nav",className:classes.list},search&&search.length>0&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"Voc\xEA est\xE1 buscando por\u2026")),/*#__PURE__*/_react["default"].createElement("div",{className:"".concat(!isMobile&&classes.heightLimit," ").concat(classes.scrolling)},search&&search.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,selected:i===index,onClick:function onClick(){return handleSelect(item,i)}},item.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),item.type==="location"&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),item.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.adressHotel,type:"body2regular"}," - ",item.address)))})),history&&!(search&&search.length>0)&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"\xDAltimas buscas")),history&&!(search&&search.length>0)&&history.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,onClick:function onClick(){return handleSelect(item,i)}},/*#__PURE__*/_react["default"].createElement(_Clock["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.date,type:"body2regular"},"- ",item.departure," \xE0 ",item.arrival)))}),mostSearched&&!(search&&search.length>0)&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItemTitle},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold"},"Destinos mais buscados")),mostSearched&&!(search&&search.length>0)&&mostSearched.map(function(item,i){return/*#__PURE__*/_react["default"].createElement(_ListItem["default"],{key:i,className:classes.listItem,button:true,onClick:function onClick(){return handleSelect(item,i)}},item.type==="hotel"&&/*#__PURE__*/_react["default"].createElement(_Hotel["default"],{size:"small"}),(item.type==="location"||!item.type)&&/*#__PURE__*/_react["default"].createElement(_Local["default"],{size:"small"}),item.type==="airport"&&/*#__PURE__*/_react["default"].createElement(_Air["default"],{size:"small"}),/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.name,type:"body2semibold"},item.name),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{className:classes.date,type:"body2regular"},"- di\xE1rias a partir de R$ ",item.price)))}))))))};PesqincHotel.propTypes={classes:_propTypes["default"].object.isRequired,search:_propTypes["default"].array,history:_propTypes["default"].array,mostSearched:_propTypes["default"].array,onChange:_propTypes["default"].func,onFocus:_propTypes["default"].func,onClose:_propTypes["default"].func,onSelect:_propTypes["default"].func,value:_propTypes["default"].array,selectedIndex:_propTypes["default"].number,transparent:_propTypes["default"].bool,isMobile:_propTypes["default"].bool,error:_propTypes["default"].bool,errorMsg:_propTypes["default"].string};var _default=(0,_withStyles["default"])(_styles.styles,{withTheme:true})(PesqincHotel);exports["default"]=_default;
//# sourceMappingURL=PesqincHotel.js.map