"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _clsx=_interopRequireDefault(require("clsx"));var _styles=require("@material-ui/core/styles");var _Plus=_interopRequireDefault(require("@cvccorp-components/icons/dist/Plus"));var _Minus=_interopRequireDefault(require("@cvccorp-components/icons/dist/Minus"));var _User=_interopRequireDefault(require("@cvccorp-components/icons/dist/User"));var _Delete=_interopRequireDefault(require("@cvccorp-components/icons/dist/Delete"));var _ArrowLeft=_interopRequireDefault(require("@cvccorp-components/icons/dist/ArrowLeft"));var _Select=_interopRequireDefault(require("../../Select"));var _TextField=_interopRequireDefault(require("../../TextField"));var _Typography=_interopRequireDefault(require("../../Typography"));var _Button=_interopRequireDefault(require("../../Button"));var _Box=_interopRequireDefault(require("../../Box"));var _Overlay=_interopRequireDefault(require("../../Overlay"));var _Animate=_interopRequireDefault(require("../../Animate"));var _styles2=require("../styles");var _options=require("./options");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}//  COMPONENTS
//  STYLES
//  OPTIONS
var uuidv4=require("uuid/v4");var Hotel=function Hotel(_ref){var classes=_ref.classes,error=_ref.error,errorMsg=_ref.errorMsg,open=_ref.open,fields=_ref.fields,onClick=_ref.onClick,handleClose=_ref.handleClose,handleChange=_ref.handleChange,handleAdd=_ref.handleAdd,handleRemove=_ref.handleRemove,handleAdults=_ref.handleAdults,handleRemoveRoom=_ref.handleRemoveRoom,handleChildAge=_ref.handleChildAge,handleRemoveChildren=_ref.handleRemoveChildren,handleAddChildren=_ref.handleAddChildren,handleClear=_ref.handleClear,initialState=_ref.initialState,isMobile=_ref.isMobile,height=_ref.height;var guests=fields.map(function(field){return field.adults+field.children}).reduce(function(accumulator,item){return accumulator+item},0);var countRoom=fields.length>1?"".concat(fields.length," Quartos"):"".concat(fields.length," Quarto");var countGuests=guests>1?"".concat(guests," H\xF3spedes"):"".concat(guests," H\xF3spede");var guestsTextValue="".concat(countRoom,"  -  ").concat(countGuests);var classNameOpen=(0,_clsx["default"])(classes.root,classes.closed);var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2["default"])(_useState,2),loaded=_useState2[0],setLoaded=_useState2[1];var _useState3=(0,_react.useState)(),_useState4=(0,_slicedToArray2["default"])(_useState3,2),disabledLimparButton=_useState4[0],setDisabledLimparButton=_useState4[1];(0,_react.useEffect)(function(){setLoaded(true)},[]);(0,_react.useEffect)(function(){var disabled=JSON.stringify(initialState)===JSON.stringify(fields);setDisabledLimparButton(disabled)},[fields]);var _useState5=(0,_react.useState)(false),_useState6=(0,_slicedToArray2["default"])(_useState5,2),isOpenAnimation=_useState6[0],setOpenAnimation=_useState6[1];var onOpenAnimate=function onOpenAnimate(){setOpenAnimation(true)};var onCloseAnimate=function onCloseAnimate(){setOpenAnimation(false)};return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,loaded&&/*#__PURE__*/_react["default"].createElement(_TextField["default"],{value:guestsTextValue,icon:/*#__PURE__*/_react["default"].createElement(_User["default"],null),size:"large",transparent:true,disabled:true,error:error,errorMsg:errorMsg,onClick:onClick,className:classes.customTextPax,inputClassName:classes.input,labelClassName:classes.input,noBorder:true}),/*#__PURE__*/_react["default"].createElement(_Animate["default"],{isOpen:open,onOpen:onOpenAnimate,onClose:onCloseAnimate},/*#__PURE__*/_react["default"].createElement(_Overlay["default"],{onClick:handleClose}),/*#__PURE__*/_react["default"].createElement(_Box["default"],{className:!isOpenAnimation?classNameOpen:classes.root},/*#__PURE__*/_react["default"].createElement("div",{className:classes.container},!isMobile?/*#__PURE__*/_react["default"].createElement("h1",{className:classes.title},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1regular"},/*#__PURE__*/_react["default"].createElement(_User["default"],{className:classes.icon,size:"medium"}),guestsTextValue)):/*#__PURE__*/_react["default"].createElement("h1",{className:classes.title},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1regular",onClick:handleClose},/*#__PURE__*/_react["default"].createElement(_ArrowLeft["default"],{className:classes.icon,size:"medium"}),"Selecione os h\xF3spedes")),/*#__PURE__*/_react["default"].createElement("div",null,/*#__PURE__*/_react["default"].createElement("div",{className:classes.section,style:{maxHeight:height}},/*#__PURE__*/_react["default"].createElement("ul",{className:classes.list},/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItem},/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"headline5"},"Quartos"),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"subtitle",className:classes.subtitle},"Adicione os quartos")),/*#__PURE__*/_react["default"].createElement("div",{className:classes.btns},/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:"btn-remove-quarto",color:"primary",icon:/*#__PURE__*/_react["default"].createElement(_Minus["default"],null),size:"small",addRemove:true,variant:"outlined",iconPosition:"center",disabled:fields.length<=1,onClick:function onClick(){return handleRemoveRoom()}}),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"subtitle",className:classes.btnLabel},fields.length),/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:"btn-add-quarto",color:"primary",icon:/*#__PURE__*/_react["default"].createElement(_Plus["default"],null),size:"small",addRemove:true,variant:"outlined",iconPosition:"center",onClick:function onClick(){return handleAdd()}}))),fields.map(function(field,fieldIdx){return/*#__PURE__*/_react["default"].createElement("li",{key:uuidv4(),className:"".concat(classes.listItem," aut-room-box-").concat(fieldIdx)},/*#__PURE__*/_react["default"].createElement("ul",{className:classes.list},/*#__PURE__*/_react["default"].createElement("h2",{className:(0,_clsx["default"])(classes.listTitle,"Hotel-room-index-".concat(fieldIdx))},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.subtitle},"Quarto ",fieldIdx+1),fieldIdx>0&&/*#__PURE__*/_react["default"].createElement("button",{type:"button",className:"".concat(classes.removeRoom," aut-hotel-remove-room-btn"),onClick:function onClick(){return handleRemove(fieldIdx)}},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.removeRoomText},/*#__PURE__*/_react["default"].createElement(_Delete["default"],null)," Remover"))),/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItem},/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"headline5"},"Adultos"),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"subtitle",className:classes.subtitle},"Acima de 18 anos")),/*#__PURE__*/_react["default"].createElement("div",{className:classes.btns},/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:"btn-remove-adulto btn-remove-adulto-".concat(fieldIdx),color:"primary",icon:/*#__PURE__*/_react["default"].createElement(_Minus["default"],null),size:"small",addRemove:true,variant:"outlined",iconPosition:"center",disabled:field.adults<=1,onClick:function onClick(){return handleAdults(fieldIdx,field.adults-1)}}),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"subtitle",className:classes.btnLabel},field.adults),/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:"btn-add-adulto btn-add-adulto-".concat(fieldIdx),color:"primary",icon:/*#__PURE__*/_react["default"].createElement(_Plus["default"],null),size:"small",addRemove:true,variant:"outlined",iconPosition:"center",onClick:function onClick(){return handleAdults(fieldIdx,field.adults+1)}}))),/*#__PURE__*/_react["default"].createElement("li",{className:classes.listItem},/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"headline5"},"Crian\xE7as"),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"subtitle",className:classes.subtitle},"De 0 at\xE9 17 anos")),/*#__PURE__*/_react["default"].createElement("div",{className:classes.btns},/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:"btn-remove-crianca btn-remove-crianca-".concat(fieldIdx),color:"primary",icon:/*#__PURE__*/_react["default"].createElement(_Minus["default"],null),size:"small",addRemove:true,variant:"outlined",iconPosition:"center",disabled:field.children<=0,onClick:function onClick(){return handleRemoveChildren(fieldIdx,field.children-1)}}),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"subtitle",className:classes.btnLabel},field.children),/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:"btn-add-crianca btn-add-crianca-".concat(fieldIdx),color:"primary",icon:/*#__PURE__*/_react["default"].createElement(_Plus["default"],null),size:"small",addRemove:true,variant:"outlined",iconPosition:"center",onClick:function onClick(){return handleAddChildren(fieldIdx,field.children+1)}}))),field.children>0&&/*#__PURE__*/_react["default"].createElement("li",{className:classes.liContainer},field.ages.map(function(age,ageIdx){return/*#__PURE__*/_react["default"].createElement("div",{key:uuidv4(),className:classes.body},/*#__PURE__*/_react["default"].createElement("span",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"headline5"},"Idade da crian\xE7a ".concat(ageIdx+1)),/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body2regular"},"ao iniciar a viagem")),/*#__PURE__*/_react["default"].createElement(_Select["default"],{customClass:"idade-quarto-".concat(fieldIdx,"-age-").concat(ageIdx),className:classes.ageSelect,size:"small",label:"Idade",placeholder:"Idade",select:_options.childAgeOptions,onChange:function onChange(e){return handleChildAge(fieldIdx,ageIdx,e)},value:age.value}))}))))}))),!isMobile?/*#__PURE__*/_react["default"].createElement("div",{className:classes.footer},/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:classes.btn,color:"primary",label:"Limpar",variant:"text",disabled:disabledLimparButton,onClick:handleClear}),/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:classes.btnApply,color:"primary",label:"Aplicar",variant:"text",onClick:function onClick(){return handleChange(guestsTextValue)}})):/*#__PURE__*/_react["default"].createElement("div",{className:open?classes.footer:(0,_clsx["default"])(classes.footer,classes.footerClose)},/*#__PURE__*/_react["default"].createElement(_Button["default"],{color:"secondary",label:"Aplicar ".concat(guestsTextValue),variant:"contained",onClick:function onClick(){return handleChange(guestsTextValue)},fullWidth:true})))))))};Hotel.defaultProps={error:false,isMobile:false,open:false,onClick:undefined,handleClose:undefined,handleAdd:undefined,handleRemove:undefined,handleRemoveRoom:undefined,handleAdults:undefined,handleAddChildren:undefined,handleRemoveChildren:undefined,handleChildAge:undefined,handleChange:undefined,handleClear:undefined,errorMsg:"",height:"auto"};Hotel.propTypes={error:_propTypes["default"].bool,isMobile:_propTypes["default"].bool,initialState:_propTypes["default"].arrayOf(_propTypes["default"].object).isRequired,open:_propTypes["default"].bool,fields:_propTypes["default"].arrayOf(_propTypes["default"].object).isRequired,onClick:_propTypes["default"].func,handleClose:_propTypes["default"].func,handleAdd:_propTypes["default"].func,handleRemove:_propTypes["default"].func,handleRemoveRoom:_propTypes["default"].func,handleAdults:_propTypes["default"].func,handleAddChildren:_propTypes["default"].func,handleRemoveChildren:_propTypes["default"].func,handleChildAge:_propTypes["default"].func,handleChange:_propTypes["default"].func,handleClear:_propTypes["default"].func,errorMsg:_propTypes["default"].string,height:_propTypes["default"].string};var _default=(0,_styles.withStyles)(_styles2.styles,{withTheme:true})(Hotel);exports["default"]=_default;
//# sourceMappingURL=Hotel.js.map