"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _TextField=_interopRequireDefault(require("@material-ui/core/TextField/TextField"));var _VisibilityOffOutlined=_interopRequireDefault(require("@material-ui/icons/VisibilityOffOutlined"));var _VisibilityOutlined=_interopRequireDefault(require("@material-ui/icons/VisibilityOutlined"));var _core=require("@unform/core");var _reactInputMask=_interopRequireDefault(require("react-input-mask"));var _MessageValidation=_interopRequireDefault(require("../MessageValidation"));var _styles=_interopRequireDefault(require("./styles"));var _excluded=["name","type","maxLength","placeholderText","showTip","infoMessage","hasMask","mask","disabledInput","shrink"];function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}var Input=function Input(_ref){var name=_ref.name,type=_ref.type,maxLength=_ref.maxLength,placeholderText=_ref.placeholderText,showTip=_ref.showTip,infoMessage=_ref.infoMessage,hasMask=_ref.hasMask,mask=_ref.mask,disabledInput=_ref.disabledInput,shrink=_ref.shrink,rest=(0,_objectWithoutProperties2["default"])(_ref,_excluded);var _useField=(0,_core.useField)(name),fieldName=_useField.fieldName,registerField=_useField.registerField,error=_useField.error,defaultValue=_useField.defaultValue;var classes=(0,_styles["default"])({error:error});var inputRef=(0,_react.useRef)(null);var errorMessageRef=(0,_react.useRef)(null);var infoMessageRef=(0,_react.useRef)(null);var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2["default"])(_useState,2),showInfoMessage=_useState2[0],setShowInfoMessage=_useState2[1];var _useState3=(0,_react.useState)(type),_useState4=(0,_slicedToArray2["default"])(_useState3,2),inputType=_useState4[0],setInputType=_useState4[1];var _useState5=(0,_react.useState)(shrink),_useState6=(0,_slicedToArray2["default"])(_useState5,2),shrinkInput=_useState6[0],setShrinkInput=_useState6[1];(0,_react.useEffect)(function(){registerField({name:fieldName,ref:inputRef.current,path:"value"})},[fieldName,registerField]);var handleVisibility=(0,_react.useCallback)(function(ref){if(ref.current.type==="password"){ref.current.type="text";setInputType("hidePassword")}else{ref.current.type="password";setInputType("password")}},[]);var handleShowInfoMessage=(0,_react.useCallback)(function(){setShrinkInput(true);if(errorMessageRef&&errorMessageRef.current){errorMessageRef.current.value=""}if(error&&error.split("").length>0){setShowInfoMessage(false)}else{setShowInfoMessage(showTip===true)}},[]);var handleHideInfoMessage=(0,_react.useCallback)(function(){setShowInfoMessage(false)},[]);if(hasMask){return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement(_reactInputMask["default"],{ref:inputRef,defaultValue:defaultValue,value:defaultValue,disabled:disabledInput,mask:mask||"",onChange:handleHideInfoMessage,onFocus:handleShowInfoMessage},function(){return/*#__PURE__*/_react["default"].createElement(_TextField["default"],{name:name,className:classes.input,inputRef:inputRef,margin:"dense",defaultValue:defaultValue,label:placeholderText,variant:"outlined",type:inputType,disabled:disabledInput,onClick:function onClick(){return setShrinkInput(true)},value:defaultValue,InputLabelProps:{style:error?{color:"#FF3344"}:{color:""},shrink:shrinkInput},InputProps:{classes:{root:classes.outlinedInput,adornedEnd:classes.adornedEnd,focused:classes.isFocused,notchedOutline:error?classes.notchedOutline:""}}})}),error&&/*#__PURE__*/_react["default"].createElement(_MessageValidation["default"],{ref:errorMessageRef,isError:true,message:error}),!error&&type==="password"&&showInfoMessage&&/*#__PURE__*/_react["default"].createElement(_MessageValidation["default"],{ref:infoMessageRef,isInfo:true,message:infoMessage||""}),!error&&name==="cpf"&&showInfoMessage&&/*#__PURE__*/_react["default"].createElement(_MessageValidation["default"],{ref:infoMessageRef,isInfo:true,message:infoMessage||""}))}return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement(_TextField["default"],{name:name,className:classes.input,inputRef:inputRef,margin:"dense",label:placeholderText,variant:"outlined",type:inputType,onChange:handleHideInfoMessage,onFocus:handleShowInfoMessage,onClick:function onClick(){return setShrinkInput(true)},inputProps:{maxLength:maxLength},InputLabelProps:{style:error?{color:"#FF3344"}:{color:""},shrink:shrinkInput},InputProps:{endAdornment:/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,inputType==="password"&&showTip===true&&/*#__PURE__*/_react["default"].createElement(_VisibilityOffOutlined["default"],{onClick:function onClick(){return handleVisibility(inputRef)},className:classes.inputVisibilityIcon}),inputType==="hidePassword"&&/*#__PURE__*/_react["default"].createElement(_VisibilityOutlined["default"],{onClick:function onClick(){return handleVisibility(inputRef)},className:classes.inputVisibilityIcon})),classes:{root:classes.outlinedInput,adornedEnd:classes.adornedEnd,focused:classes.isFocused,notchedOutline:error?classes.notchedOutline:""}}}),error&&/*#__PURE__*/_react["default"].createElement(_MessageValidation["default"],{ref:errorMessageRef,isError:true,message:error}),!error&&type==="password"&&showInfoMessage&&/*#__PURE__*/_react["default"].createElement(_MessageValidation["default"],{ref:infoMessageRef,isInfo:true,message:infoMessage||""}),!error&&name==="cpf"&&showInfoMessage&&/*#__PURE__*/_react["default"].createElement(_MessageValidation["default"],{ref:infoMessageRef,isInfo:true,message:infoMessage||""}))};var _default=Input;exports["default"]=_default;
//# sourceMappingURL=index.js.map