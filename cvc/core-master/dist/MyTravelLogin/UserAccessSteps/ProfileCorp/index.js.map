{"version":3,"sources":["../../../../src/MyTravelLogin/UserAccessSteps/ProfileCorp/index.tsx"],"names":["ProfileCorp","width","onCloseClick","isModal","user","ctx","BrandContext","renderNewStep","setPreviousStep","previousStep","isMobile","setAuthAmplify","setLoading","loading","styles","handleNavigateToCorp","environment","window","location","href","includes","cookies","Cookies","set","btoa","email","path","open","handleNavigateAsUser","api","get","brand","response","userExists","data","found","nextStep","emailConfirmed","root","centeredContent","fontWeight","fontSize"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { Typography, withWidth, Link } from \"@material-ui/core\";\nimport { WithWidth, isWidthDown } from \"@material-ui/core/withWidth\";\nimport Cookies from \"universal-cookie\";\nimport { BrandContext } from \"../../../BrandContext\";\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport { useLoadingContext } from \"../../contexts/LoadingContext\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport Loading from \"../../shared/components/Loading\";\nimport Terms from \"../../shared/components/Terms\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport api from \"../../shared/services/api\";\nimport { usersInProvider } from \"../MainScreen/utils\";\nimport { useProfileStyles } from \"./styles\";\n\ninterface Props extends WithWidth {\n    onCloseClick?(): void;\n    isModal?: boolean;\n}\n\nconst ProfileCorp: React.FC<Props> = ({ width, onCloseClick, isModal }) => {\n    const { user } = useUserData();\n    const ctx = useContext(BrandContext);\n    const { renderNewStep, setPreviousStep, previousStep } = useRenderSteps();\n    const isMobile = isWidthDown(\"sm\", width);\n    const { setAuthAmplify } = useAuthAmplifyContext();\n    const { setLoading, loading } = useLoadingContext();\n    const styles = useProfileStyles({\n        isMobile\n    });\n\n    const handleNavigateToCorp = () => {\n        let environment = \"\";\n        if (window.location.href.includes(\"qa.\")) {\n            environment = \"qa.\";\n        } else if (window.location.href.includes(\"ti.\")) {\n            environment = \"ti.\";\n        } else if (window.location.href.includes(\"localhost\")) {\n            environment = \"ti.\";\n        }\n\n        const cookies = new Cookies();\n        cookies.set(\"corpAgentId\", btoa(user.email), {\n            path: \"/\"\n        });\n\n        window.open(`https://${environment}cvc.com.br/venda-assistida/login`, \"_blank\");\n    };\n    useEffect(() => {\n        setPreviousStep(\"MainScreen\");\n    }, []);\n    const handleNavigateAsUser = async () => {\n        setLoading(true);\n        const { email } = user;\n\n        const response = await api.get(`/apigw/authentication/${ctx.brand}/user-exists?email=${email}`);\n\n        const userExists = usersInProvider(response.data.found, true);\n        setLoading(false);\n        setPreviousStep(\"ProfileCorp\");\n        if (userExists?.nextStep) {\n            if (!userExists.emailConfirmed) {\n                setAuthAmplify(\"confirmSignUp\");\n            }\n\n            renderNewStep(userExists.nextStep);\n        } else {\n            renderNewStep(\"ConfirmMainScreen\");\n        }\n    };\n    return loading ? (\n        <Loading />\n    ) : (\n        <>\n            <div className={styles.root}>\n                <HeaderLogin isModal={isModal} previousStep={previousStep} onCloseClick={onCloseClick} />\n                <div className={styles.centeredContent}>\n                    <Typography variant=\"subtitle1\">Perfil Corporativo</Typography>\n                    <Typography variant=\"body2\">\n                        Identificamos uma conta corporativa usando o e-mail <strong>{user.email || \"email@cvc.com.br\"}</strong>, sinalize abaixo com qual perfil vocÃª quer utilizar.\n                    </Typography>\n                </div>\n                <InternalButton type=\"button\" text=\"Entrar com a conta corporativa\" handlerClick={handleNavigateToCorp} />\n                <Link target=\"_blank\" onClick={handleNavigateAsUser}>\n                    <Typography variant=\"caption\" style={{ fontWeight: 700, fontSize: \"12px\" }}>\n                        Continuar como cliente CVC\n                    </Typography>\n                </Link>\n            </div>\n            <Terms />\n        </>\n    );\n};\n\nexport default withWidth()(ProfileCorp);\n"],"file":"index.js"}