{"version":3,"sources":["../../../../../src/MyTravelLogin/UserAccessSteps/MainScreen/utils/index.ts"],"names":["IProviders","usersInProvider","usersExists","amICorp","corpUser","updateUserNextStep","CORP","user","COGNITO","LEGACY","FACEBOOK","GOOGLE","APPLE","nextStep","emailConfirmed","providerArray","filterUserByProviders","users","providers","usersFilter","filter","find","el","provider","sort","a","b","indexOf"],"mappings":"2IAAYA,CAAAA,U,yCAAAA,U,EAAAA,U,sBAAAA,U,oBAAAA,U,wBAAAA,U,kBAAAA,U,oBAAAA,U,kBAAAA,U,sBAAAA,U,MAeL,QAASC,CAAAA,eAAT,CAAyBC,WAAzB,CAA+F,IAA1CC,CAAAA,OAA0C,2DAAhC,KAAgC,CAClG,GAAI,CAACA,OAAL,CAAc,CACV,GAAMC,CAAAA,QAAQ,CAAGC,kBAAkB,CAACH,WAAD,CAAc,CAACF,UAAU,CAACM,IAAZ,CAAd,CAAiC,aAAjC,CAAnC,CACA,GAAIF,QAAJ,CAAc,CACV,MAAOA,CAAAA,QACV,CACJ,CAED,GAAIG,CAAAA,IAAI,CAAGF,kBAAkB,CAACH,WAAD,CAAc,CAACF,UAAU,CAACQ,OAAZ,CAAqBR,UAAU,CAACS,MAAhC,CAAd,CAAuD,UAAvD,CAA7B,CACA,GAAI,CAACF,IAAL,CAAW,CACPA,IAAI,CAAGF,kBAAkB,CAACH,WAAD,CAAc,CAACF,UAAU,CAACU,QAAZ,CAAsBV,UAAU,CAACW,MAAjC,CAAyCX,UAAU,CAACY,KAApD,CAAd,CAA0E,oBAA1E,CAC5B,CAFD,IAEO,CACHL,IAAI,CAACM,QAAL,CAAgBN,IAAI,CAACO,cAAL,CAAsBP,IAAI,CAACM,QAA3B,CAAsC,mBACzD,CACD,MAAON,CAAAA,IACV,CAED,QAASF,CAAAA,kBAAT,CAA4BH,WAA5B,CAAwDa,aAAxD,CAAqFF,QAArF,CAAgI,CAC5H,GAAMN,CAAAA,IAAI,CAAGS,qBAAqB,CAACd,WAAD,CAAca,aAAd,CAAlC,CACA,GAAIR,IAAJ,CAAU,CACNA,IAAI,CAACM,QAAL,CAAgBA,QAAhB,CACA,MAAON,CAAAA,IACV,CACJ,CAED,QAASS,CAAAA,qBAAT,CAA+BC,KAA/B,CAAqDC,SAArD,CAA2F,CACvF,GAAMC,CAAAA,WAAW,CAAGF,KAAK,CACpBG,MADe,CACR,SAACb,IAAD,CAAuB,CAC3B,MAAOW,CAAAA,SAAS,CAACG,IAAV,CAAe,SAAAC,EAAE,QAAIA,CAAAA,EAAE,EAAIf,IAAI,CAACgB,QAAf,CAAjB,CACV,CAHe,EAIfC,IAJe,CAIV,SAACC,CAAD,CAAIC,CAAJ,QAAWR,CAAAA,SAAS,CAACS,OAAV,CAAkBF,CAAC,CAACF,QAApB,EAAgCL,SAAS,CAACS,OAAV,CAAkBD,CAAC,CAACH,QAApB,CAAhC,CAAgE,CAAhE,CAAoE,CAAC,CAAhF,CAJU,CAApB,CAKA,MAAOJ,CAAAA,WAAW,CAAC,CAAD,CACrB","sourcesContent":["export enum IProviders {\n    COGNITO = \"cognito\",\n    LEGACY = \"legacy\",\n    FACEBOOK = \"facebook\",\n    APPLE = \"apple\",\n    GOOGLE = \"google\",\n    CORP = \"corp\"\n}\nexport interface IUserExists {\n    emailConfirmed: boolean;\n    isSocial: boolean;\n    provider: IProviders;\n    nextStep?: string;\n}\n\nexport function usersInProvider(usersExists: IUserExists[], amICorp = false): IUserExists | undefined {\n    if (!amICorp) {\n        const corpUser = updateUserNextStep(usersExists, [IProviders.CORP], \"ProfileCorp\");\n        if (corpUser) {\n            return corpUser;\n        }\n    }\n\n    let user = updateUserNextStep(usersExists, [IProviders.COGNITO, IProviders.LEGACY], \"Password\");\n    if (!user) {\n        user = updateUserNextStep(usersExists, [IProviders.FACEBOOK, IProviders.GOOGLE, IProviders.APPLE], \"SocialLoginAccount\");\n    } else {\n        user.nextStep = user.emailConfirmed ? user.nextStep : \"UnverifiedAccount\";\n    }\n    return user;\n}\n\nfunction updateUserNextStep(usersExists: IUserExists[], providerArray: IProviders[], nextStep: string): IUserExists | undefined {\n    const user = filterUserByProviders(usersExists, providerArray);\n    if (user) {\n        user.nextStep = nextStep;\n        return user;\n    }\n}\n\nfunction filterUserByProviders(users: IUserExists[], providers: IProviders[]): IUserExists {\n    const usersFilter = users\n        .filter((user: IUserExists) => {\n            return providers.find(el => el == user.provider);\n        })\n        .sort((a, b) => (providers.indexOf(a.provider) > providers.indexOf(b.provider) ? 1 : -1));\n    return usersFilter[0];\n}\n"],"file":"index.js"}