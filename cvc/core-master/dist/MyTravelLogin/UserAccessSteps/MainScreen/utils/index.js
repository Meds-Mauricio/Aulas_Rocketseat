"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.usersInProvider=usersInProvider;exports.IProviders=void 0;var IProviders;exports.IProviders=IProviders;(function(IProviders){IProviders["COGNITO"]="cognito";IProviders["LEGACY"]="legacy";IProviders["FACEBOOK"]="facebook";IProviders["APPLE"]="apple";IProviders["GOOGLE"]="google";IProviders["CORP"]="corp"})(IProviders||(exports.IProviders=IProviders={}));function usersInProvider(usersExists){var amICorp=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!amICorp){var corpUser=updateUserNextStep(usersExists,[IProviders.CORP],"ProfileCorp");if(corpUser){return corpUser}}var user=updateUserNextStep(usersExists,[IProviders.COGNITO,IProviders.LEGACY],"Password");if(!user){user=updateUserNextStep(usersExists,[IProviders.FACEBOOK,IProviders.GOOGLE,IProviders.APPLE],"SocialLoginAccount")}else{user.nextStep=user.emailConfirmed?user.nextStep:"UnverifiedAccount"}return user}function updateUserNextStep(usersExists,providerArray,nextStep){var user=filterUserByProviders(usersExists,providerArray);if(user){user.nextStep=nextStep;return user}}function filterUserByProviders(users,providers){var usersFilter=users.filter(function(user){return providers.find(function(el){return el==user.provider})}).sort(function(a,b){return providers.indexOf(a.provider)>providers.indexOf(b.provider)?1:-1});return usersFilter[0]}
//# sourceMappingURL=index.js.map