{"version":3,"sources":["../../../../src/MyTravelLogin/UserAccessSteps/ForgotPassword/index.tsx"],"names":["ForgotPassword","intl","onCloseClick","isModal","classes","saveOnGa","renderNewStep","setPreviousStep","setAuthAmplify","user","setUser","handleValidationCode","Promise","resolve","Auth","forgotPassword","email","event","category","action","label","handleMainScreen","root","title","id","subTitle","subTitleNoMargin","changeEmail","subTitleLinkChangeEmail","buttonContainer","formatMessage"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport Link from \"@material-ui/core/Link\";\nimport useStyles from \"./styles\";\nimport translate from \"../../shared/i18n/translate\";\nimport Terms from \"../../shared/components/Terms\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport Title from \"../../shared/components/Title\";\nimport SubTitle from \"../../shared/components/SubTitle\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport { injectIntl, IntlShape } from \"react-intl\";\nimport { Auth } from \"aws-amplify\";\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport useGa from '../../../utils/useGa';\n\ninterface IForgotPassword {\n    intl: IntlShape;\n    onCloseClick?(): void;\n    isModal?: boolean;\n}\n\nconst ForgotPassword: React.FC<IForgotPassword> = ({ intl, onCloseClick, isModal }) => {\n\n    const classes = useStyles({});\n    const { saveOnGa } = useGa();\n    const { renderNewStep, setPreviousStep } = useRenderSteps();\n    const { setAuthAmplify } = useAuthAmplifyContext();\n    const { user, setUser } = useUserData();\n    useEffect(() => {\n        setPreviousStep(\"Password\");\n    }, []);\n    const handleValidationCode = () => new Promise(async (resolve) => {\n        try {\n            await Auth.forgotPassword(user.email);\n            saveOnGa({\n                event: \"login_event\",\n                category: \"Account\",\n                action: \"Recovery Password\",\n                label: \"step 2 | redefine password\"\n            });\n            setAuthAmplify(\"ChangePassword\");\n            renderNewStep(\"ValidationCode\");\n        } catch (error) {\n            // exibir error servidor\n        }\n        return resolve;\n\n\n    });\n    const handleMainScreen = () => {\n        setUser({\n            ...user,\n            email: \"\"\n        });\n\n        saveOnGa({\n            event: \"login_event\",\n            category: \"Account\",\n            action: \"Change email\",\n            label: \"action :: change email\"\n        });\n        renderNewStep(\"MainScreen\");\n    };\n    return (\n        <>\n            <div className={classes.root}>\n                <HeaderLogin isModal={isModal} previousStep=\"Password\" onCloseClick={onCloseClick} />\n                <Title className={classes.title}>\n                    {translate({ id: \"ForgotPassword.title\" })}\n                </Title>\n                <SubTitle className={classes.subTitle}>\n                    {translate({ id: \"ForgotPassword.subTitle\" })}\n                </SubTitle>\n                <SubTitle variant=\"caption\" className={classes.subTitleNoMargin}>\n                    {user ? user.email : \"\"}\n                </SubTitle>\n                <Link onClick={(handleMainScreen)} className={classes.changeEmail}>\n                    <SubTitle variant=\"caption\" className={classes.subTitleLinkChangeEmail}>\n                        {translate({ id: \"ForgotPassword.linkChangeEmail\" })}\n                    </SubTitle>\n                </Link>\n\n                <div className={classes.buttonContainer}>\n                    <InternalButton\n                        text={intl.formatMessage({ id: \"ForgotPassword.actionButton\" })}\n                        handlerClick={handleValidationCode}\n                    />\n                </div>\n\n            </div>\n            <Terms />\n        </>\n    );\n};\n\nexport default injectIntl(ForgotPassword);\n"],"file":"index.js"}