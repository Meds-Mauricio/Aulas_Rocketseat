"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=_interopRequireWildcard(require("react"));var _DropDown=_interopRequireDefault(require("@cvccorp-components/icons/dist/DropDown"));var _Help=_interopRequireDefault(require("@cvccorp-components/icons/dist/Help"));var IconsDist=_interopRequireWildcard(require("@cvccorp-components/icons/dist/index"));var _Sac=_interopRequireDefault(require("@cvccorp-components/icons/dist/Sac"));var _Store=_interopRequireDefault(require("@cvccorp-components/icons/dist/Store"));var _Grid=_interopRequireDefault(require("@material-ui/core/Grid"));var _styles=require("@material-ui/core/styles");var _clsx=_interopRequireDefault(require("clsx"));var _propTypes=_interopRequireDefault(require("prop-types"));var _BrandContext=require("../BrandContext");var _BrandContext2=require("../BrandContext/BrandContext");var _Container=_interopRequireDefault(require("../Container"));var _DropDown2=_interopRequireDefault(require("../DropDown"));var _Logo=_interopRequireDefault(require("../Logo"));var _MenuMobile=_interopRequireDefault(require("../MenuMobile"));var _Typography=_interopRequireDefault(require("../Typography"));var _UserArea=_interopRequireDefault(require("../UserArea"));var _HeaderBlock=require("./HeaderBlock");var _styles2=require("./styles");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})}keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function buildIcon(icon,props){if(icon==null)return null;if(icon.indexOf("http")===0)return/*#__PURE__*/_react["default"].createElement("img",(0,_extends2["default"])({src:icon},props,{style:{verticalAlign:"middle"}}));var Icon=IconsDist[icon];if(Icon==null)return null;return/*#__PURE__*/_react["default"].createElement(Icon,props)}var showHiddenMenu=typeof window!=="undefined"&&new URLSearchParams(location.search).has("showHiddenMenu");function getMenu(menuList,hiddenList){if(!showHiddenMenu||!hiddenList||hiddenList.length===0)return menuList;return[].concat((0,_toConsumableArray2["default"])(menuList),(0,_toConsumableArray2["default"])(hiddenList))}var useHeaderStyles=(0,_styles.makeStyles)(_styles2.styles);function FindAStore(_ref){var classes=_ref.classes;return/*#__PURE__*/_react["default"].createElement("div",{className:classes.headline},/*#__PURE__*/_react["default"].createElement("a",{href:"https://lojas.cvc.com.br/",style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer"},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.findAStore},/*#__PURE__*/_react["default"].createElement(_Store["default"],{className:classes.icon,size:"medium"}),"Encontre uma loja CVC")))}function Header(_ref2){var small=_ref2.small,product=_ref2.product,user=_ref2.user,isMobile=_ref2.isMobile,menuSurrogateObject=_ref2.menuSurrogateObject;var ctxHideBg=(0,_react.useContext)(_HeaderBlock.HeaderHideBgContext);var styleProps=(0,_react.useMemo)(function(){return{hideDefaultBg:ctxHideBg}},[ctxHideBg]);var classes=useHeaderStyles(styleProps);var ctx=(0,_react.useContext)(_BrandContext.BrandContext);if(ctx==null)throw{message:"BrandContext not found. please import BrandContextProvider in your root App."};var isRenderMenuSurrogate=Boolean(menuSurrogateObject);// const isRenderUser = Boolean(isUser);
var MObject=menuSurrogateObject!==null&&menuSurrogateObject!==void 0?menuSurrogateObject:Menu;var _ctx$menu=ctx.menu,principals=_ctx$menu.principals,hiddenPrincipals=_ctx$menu.hiddenPrincipals,others=_ctx$menu.others,hiddenOthers=_ctx$menu.hiddenOthers,phone=_ctx$menu.phone,phoneSales=_ctx$menu.phoneSales,help=_ctx$menu.help;var selectedProduct=[].concat((0,_toConsumableArray2["default"])(getMenu(principals,hiddenPrincipals)),(0,_toConsumableArray2["default"])(getMenu(others,hiddenOthers))).find(function(x){return x.product===product});var renderBreadCrumb=function renderBreadCrumb(){var renderListItem=function renderListItem(item,index){return/*#__PURE__*/_react["default"].createElement("li",{className:"breadcrumb-item",itemProp:"itemListElement",itemScope:"",itemType:"http://schema.org/ListItem",key:index},/*#__PURE__*/_react["default"].createElement("a",{itemProp:"item",href:item.link,title:item.label,target:item.target},/*#__PURE__*/_react["default"].createElement("span",{itemProp:"name"},item.label)),/*#__PURE__*/_react["default"].createElement("meta",{itemProp:"position",content:index+1}))};return/*#__PURE__*/_react["default"].createElement("div",{id:"container-breadcrumbs",style:{display:"none"}},/*#__PURE__*/_react["default"].createElement("ul",{itemProp:"breadcrumb",className:"breadcrumb-container",itemScope:"",itemType:"http://schema.org/BreadcrumbList"},getMenu(principals,hiddenPrincipals).map(function(item,index){return renderListItem(item,index)})))};var RenderMobile=function RenderMobile(){var _useContext=(0,_react.useContext)(_BrandContext.BrandContext),logo=_useContext.logo;return/*#__PURE__*/_react["default"].createElement("div",{className:classes.mobile},/*#__PURE__*/_react["default"].createElement("a",{href:"/"},/*#__PURE__*/_react["default"].createElement(_Logo["default"],{type:"light",className:classes.mobileLogo,style:{width:logo.preferredWidthMobile}})),/*#__PURE__*/_react["default"].createElement(MObject,{type:"Mobile",classes:classes,selectedProduct:selectedProduct,user:user,isMobile:isMobile}))};var RenderDesktop=function RenderDesktop(){var _useContext2=(0,_react.useContext)(_BrandContext.BrandContext),logo=_useContext2.logo;return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement("div",{className:classes.top},/*#__PURE__*/_react["default"].createElement(_Container["default"],null,ctx.brand===_BrandContext2.Brand.CVC&&/*#__PURE__*/_react["default"].createElement(FindAStore,{classes:classes}),phone&&/*#__PURE__*/_react["default"].createElement("div",{className:classes.headline},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionregular",className:classes.contact},/*#__PURE__*/_react["default"].createElement(_Sac["default"],{className:classes.icon,size:"medium"}),!phoneSales&&"Televendas e"," Central de atendimento:",/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.white},phone))),phoneSales&&/*#__PURE__*/_react["default"].createElement("div",{className:classes.headline},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionregular",className:classes.contact},/*#__PURE__*/_react["default"].createElement("span",{className:classes.televendas},"Televendas:",/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionsemibold",className:classes.white},phoneSales)))),help&&/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body2regular",className:classes.help},/*#__PURE__*/_react["default"].createElement("a",{className:classes.helpLink,href:help},/*#__PURE__*/_react["default"].createElement(_Help["default"],{className:classes.icon,size:"medium"}),"Precisa de ajuda?")))),/*#__PURE__*/_react["default"].createElement("div",{className:small?classes.mainSmall:classes.main},/*#__PURE__*/_react["default"].createElement(_Container["default"],null,/*#__PURE__*/_react["default"].createElement(_Grid["default"],{container:true},/*#__PURE__*/_react["default"].createElement(_Grid["default"],{item:true,xs:small?9:1,className:classes.logoContainer},/*#__PURE__*/_react["default"].createElement("a",{href:"/"},/*#__PURE__*/_react["default"].createElement(_Logo["default"],{type:"light",className:classes.logo,style:{width:logo.preferredWidth}})),small&&/*#__PURE__*/_react["default"].createElement(MObject,{type:"DeskSmall",classes:classes,selectedProduct:selectedProduct,user:user,isMobile:isMobile})),!small&&/*#__PURE__*/_react["default"].createElement(MObject,{type:"DeskRegular",classes:classes,selectedProduct:selectedProduct,user:user,isMobile:isMobile}),!isRenderMenuSurrogate&&/*#__PURE__*/_react["default"].createElement(_Grid["default"],{item:true,xs:3},/*#__PURE__*/_react["default"].createElement(_UserArea["default"],null))))))};return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement("header",{id:"header"},isMobile?RenderMobile():RenderDesktop()),renderBreadCrumb())}function MenuMob(_ref3){var classes=_ref3.classes,selectedProduct=_ref3.selectedProduct,user=_ref3.user,isMobile=_ref3.isMobile;var ctx=(0,_react.useContext)(_BrandContext.BrandContext);var ctxMenu=ctx.menu;var principals=ctxMenu.principals,hiddenPrincipals=ctxMenu.hiddenPrincipals,others=ctxMenu.others,hiddenOthers=ctxMenu.hiddenOthers,phone=ctxMenu.phone,phoneSales=ctxMenu.phoneSales,help=ctxMenu.help;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2["default"])(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var princ=getMenu(principals,hiddenPrincipals);var ot=getMenu(others,hiddenOthers);(0,_react.useEffect)(function(){if(isOpen&&typeof window!=="undefined"&&window.document&&isMobile){window.document.body.classList.add("stop-scroll");return function(){return window.document.body.classList.remove("stop-scroll")}}},[isOpen]);var customPrincipals=(0,_react.useMemo)(function(){if((ctx===null||ctx===void 0?void 0:ctx.brand)!==_BrandContext2.Brand.CVC||!princ)return princ;return[].concat((0,_toConsumableArray2["default"])(princ),[{icon:"Store",label:"Encontre uma loja CVC",link:"https://lojas.cvc.com.br/",target:"_blank"}])},[ctx===null||ctx===void 0?void 0:ctx.brand,principals,hiddenPrincipals]);return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement("a",{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function onClick(){return setIsOpen(true)}},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body2regular",className:classes.menuMobile},selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.label,/*#__PURE__*/_react["default"].createElement(_DropDown["default"],null))),/*#__PURE__*/_react["default"].createElement(_MenuMobile["default"],{isOpen:isOpen,goBack:function goBack(){return setIsOpen(false)},user:user,product:selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.label,more:ot.length>0,help:help,phone:phone,phoneSales:phoneSales,menu:customPrincipals.map(function(x){return _objectSpread(_objectSpread({},x),{},{icon:buildIcon(x.icon)})}),submenu:ot.map(function(x){return _objectSpread(_objectSpread({},x),{},{icon:buildIcon(x.icon)})}),ctx:ctx}))}function MenuDeskSmall(_ref4){var selectedProduct=_ref4.selectedProduct,classes=_ref4.classes;var ctxMenu=(0,_react.useContext)(_BrandContext.BrandContext).menu;var principals=ctxMenu.principals,hiddenPrincipals=ctxMenu.hiddenPrincipals,others=ctxMenu.others,hiddenOthers=ctxMenu.hiddenOthers;var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2["default"])(_useState3,2),isMoreActive=_useState4[0],setIsIsMoreActive=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=(0,_slicedToArray2["default"])(_useState5,2),isOpen=_useState6[0],setIsOpen=_useState6[1];var ot=getMenu(others,hiddenOthers);return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement("button",{className:classes.productBtn,onClick:function onClick(){return setIsOpen(true)}},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1regular"},buildIcon(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.icon,{className:classes.productBtnIcon})," ",selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.label," ",/*#__PURE__*/_react["default"].createElement(_DropDown["default"],null))),isOpen&&/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement("span",{onClick:function onClick(){return setIsOpen(false)},className:classes.overlay}),/*#__PURE__*/_react["default"].createElement("div",{className:classes.submenuSmall},!isMoreActive&&/*#__PURE__*/_react["default"].createElement("ul",{className:(0,_clsx["default"])(classes.submenuSmallList,isMoreActive?classes.mainMenuInactive:classes.mainMenuActive)},getMenu(principals,hiddenPrincipals).map(function(item,key){return/*#__PURE__*/_react["default"].createElement("li",{key:key,className:classes.submenuSmallItem},/*#__PURE__*/_react["default"].createElement("a",{href:item.link,target:item.target,title:item.label,alt:item.label,className:item.active?(0,_clsx["default"])(classes.menuSmall,classes.menuSmallActive):classes.menuSmall},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1regular"},/*#__PURE__*/_react["default"].createElement("span",{className:classes.menuSmallIcon},buildIcon(item.icon)),item.label)))})),ot.length>0&&/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"headline6",onClick:function onClick(){return setIsIsMoreActive(!isMoreActive)},className:(0,_clsx["default"])(classes.submenuSmallTitle,isMoreActive?classes.submenuSmallTitleActive:classes.submenuSmallTitleInactive)},"Mais",/*#__PURE__*/_react["default"].createElement(_DropDown["default"],{className:classes.submenuSmallTitleIcon})),/*#__PURE__*/_react["default"].createElement("ul",{className:(0,_clsx["default"])(classes.submenuSmallList,isMoreActive?classes.submenuMoreActive:classes.submenuMoreInactive)},ot.map(function(item,key){return/*#__PURE__*/_react["default"].createElement("li",{key:key,className:classes.submenuSmallItem},/*#__PURE__*/_react["default"].createElement("a",{href:item.link,target:item.target,title:item.label,alt:item.label,className:classes.menuSmall},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1regular"},/*#__PURE__*/_react["default"].createElement("span",{className:classes.menuSmallIcon},buildIcon(item.icon)),item.label)))})))))}function MoreItemsOpened(_ref5){var others=_ref5.others,classes=_ref5.classes;var fullmenu=(0,_react.useMemo)(function(){var items=others.map(function(item,key){return/*#__PURE__*/_react["default"].createElement("a",{key:key+1,href:item.link,target:item.target,title:item.label,alt:item.label,className:classes.submenuItem},/*#__PURE__*/_react["default"].createElement("span",{className:classes.icon},buildIcon(item.icon))," ",item.label)});return[/*#__PURE__*/_react["default"].createElement(_Typography["default"],{key:0,type:"headline5",className:classes.submenuItem},"Mais")].concat((0,_toConsumableArray2["default"])(items))},[others]);return/*#__PURE__*/_react["default"].createElement(_DropDown2["default"],{className:classes.submenu,menu:fullmenu})}function MoreItems(_ref6){var others=_ref6.others,classes=_ref6.classes;var _useState7=(0,_react.useState)(undefined),_useState8=(0,_slicedToArray2["default"])(_useState7,2),itemSelected=_useState8[0],setItemSelected=_useState8[1];return/*#__PURE__*/_react["default"].createElement("li",{className:classes.menu},/*#__PURE__*/_react["default"].createElement("span",{className:classes.menuLink,onClick:function onClick(){return setItemSelected(itemSelected!==others?others:undefined)}},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1regular"},"Mais"),/*#__PURE__*/_react["default"].createElement(_DropDown["default"],null)),itemSelected&&/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement("span",{className:classes.overlay,onClick:function onClick(){return setItemSelected(undefined)}}),/*#__PURE__*/_react["default"].createElement(MoreItemsOpened,{others:others,classes:classes})))}function ItemMenu(_ref7){var selectedProduct=_ref7.selectedProduct,classes=_ref7.classes,menu=_ref7.menu;return/*#__PURE__*/_react["default"].createElement("li",{className:classes.menu},/*#__PURE__*/_react["default"].createElement("a",{id:menu.id,href:menu.link,target:menu.target,title:menu.label,alt:menu.label,className:classes.menuLink},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:menu.label===(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.label)?"body1semibold":"body1regular",className:(0,_clsx["default"])(classes.menuText,menu.label===(selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.label)&&classes.active)},/*#__PURE__*/_react["default"].createElement("span",{className:classes.icon},buildIcon(menu.icon)),menu.label)))}function MenuDeskRegular(_ref8){var selectedProduct=_ref8.selectedProduct,classes=_ref8.classes;var ctxMenu=(0,_react.useContext)(_BrandContext.BrandContext).menu;var principals=ctxMenu.principals,hiddenPrincipals=ctxMenu.hiddenPrincipals,others=ctxMenu.others,hiddenOthers=ctxMenu.hiddenOthers;var ot=getMenu(others,hiddenOthers);return/*#__PURE__*/_react["default"].createElement(_Grid["default"],{item:true,xs:8},/*#__PURE__*/_react["default"].createElement("ul",{className:classes.menuList},getMenu(principals,hiddenPrincipals).map(function(item){return/*#__PURE__*/_react["default"].createElement(ItemMenu,{key:item.link,selectedProduct:selectedProduct,menu:item,classes:classes})}),ot.length>0&&/*#__PURE__*/_react["default"].createElement(MoreItems,{others:ot,classes:classes})))}var dictMenuType={DeskRegular:MenuDeskRegular,DeskSmall:MenuDeskSmall,Mobile:MenuMob};function Menu(_ref9){var type=_ref9.type,classes=_ref9.classes,user=_ref9.user,selectedProduct=_ref9.selectedProduct,isMobile=_ref9.isMobile;var T=dictMenuType[type];return/*#__PURE__*/_react["default"].createElement(T,{selectedProduct:selectedProduct,classes:classes,user:user,isMobile:isMobile})}Header.propTypes={user:_propTypes["default"].object,isMobile:_propTypes["default"].bool,small:_propTypes["default"].bool,product:_propTypes["default"].string,menuSurrogateObject:_propTypes["default"].object};var _default=Header;exports["default"]=_default;
//# sourceMappingURL=Header.js.map