"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _createNumberMask=_interopRequireDefault(require("text-mask-addons/dist/createNumberMask"));var _styles=require("@material-ui/core/styles");var _Slider=_interopRequireDefault(require("../Slider"));var _Filter=_interopRequireDefault(require("../Filter"));var _Typography=_interopRequireDefault(require("../Typography"));var _TextField=_interopRequireDefault(require("../TextField"));var _styles2=require("./styles");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})}keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}var FilterRange=function FilterRange(props){var rangeValue=props.rangeValue,onApply=props.onApply,label=props.label,onReset=props.onReset,noModal=props.noModal,className=props.className,maskOptions=props.maskOptions,isMobile=props.isMobile,open=props.open,_onOpen=props.onOpen,onClose=props.onClose,values=props.values,height=props.height,filterTitle=props.filterTitle;var disabled=JSON.stringify(rangeValue)===JSON.stringify(values);var _useState=(0,_react.useState)(!disabled),_useState2=(0,_slicedToArray2["default"])(_useState,2),isApply=_useState2[0],setIsApply=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2["default"])(_useState3,2),isReset=_useState4[0],setIsReset=_useState4[1];var isActive=function isActive(){if(JSON.stringify(rangeValue)===JSON.stringify(values)&&isApply){setIsApply(false)}return!noModal&&JSON.stringify(rangeValue)!==JSON.stringify(values)};var value=filterTitle||"";var _onApply=function _onApply(){setIsApply(true);onApply("".concat(maskOptions?maskOptions.prefix:"").concat(rangeValue.min," - ").concat(maskOptions?maskOptions.prefix:""," ").concat(rangeValue.max))};var _onClose=function _onClose(){setIsApply(true);onClose("".concat(maskOptions?maskOptions.prefix:"").concat(rangeValue.min," - ").concat(maskOptions?maskOptions.prefix:""," ").concat(rangeValue.max))};var Child=function Child(){return/*#__PURE__*/_react["default"].createElement(ContentRange,props)};(0,_react.useEffect)(function(){if(isReset){setIsApply(false);setIsReset(false);onReset()}},[isReset]);return/*#__PURE__*/_react["default"].createElement(_Filter["default"],{className:className,isList:true,isMobile:isMobile,noModal:noModal,label:label,height:height,items:[!isReset?/*#__PURE__*/_react["default"].createElement(ContentRange,props):/*#__PURE__*/_react["default"].createElement(Child,null)],onOpen:function onOpen(){return _onOpen()},isOpen:open,onApply:_onApply,onReset:function onReset(){setIsReset(true)},onClose:_onClose,isActive:isActive()&&isApply,value:[value],disabled:disabled,isReset:isReset})};FilterRange.defaultProps={classes:undefined,onApply:undefined,onReset:undefined,noModal:false,onChange:undefined,className:undefined,isMobile:false,step:50,open:false,onOpen:undefined,onClose:undefined,handleFocus:undefined,handleBlur:undefined,handleChange:undefined};FilterRange.propTypes={classes:_propTypes["default"].oneOfType([_propTypes["default"].object,_propTypes["default"].string]),onApply:_propTypes["default"].func,onReset:_propTypes["default"].func,noModal:_propTypes["default"].bool,onChange:_propTypes["default"].func,className:_propTypes["default"].oneOfType([_propTypes["default"].object,_propTypes["default"].string]),isMobile:_propTypes["default"].bool,step:_propTypes["default"].number,open:_propTypes["default"].bool,onOpen:_propTypes["default"].func,onClose:_propTypes["default"].func,handleFocus:_propTypes["default"].func,handleBlur:_propTypes["default"].func,handleChange:_propTypes["default"].func};var ContentRange=function ContentRange(_ref){var classes=_ref.classes,rangeValue=_ref.rangeValue,_onChangeCommitted=_ref.onChangeCommitted,maskOptions=_ref.maskOptions,step=_ref.step,rangeTitleValues=_ref.rangeTitleValues,handleFocus=_ref.handleFocus,handleBlur=_ref.handleBlur,handleChange=_ref.handleChange,values=_ref.values;var currencyMask=(0,_createNumberMask["default"])(_objectSpread({},maskOptions));var _useState5=(0,_react.useState)(_objectSpread({},rangeValue)),_useState6=(0,_slicedToArray2["default"])(_useState5,2),sliderValues=_useState6[0],setSliderValues=_useState6[1];return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"captionregular",className:classes.text},"de ",/*#__PURE__*/_react["default"].createElement("span",{className:classes.highlight},"R$ ",rangeTitleValues.min)," ","at\xE9 ",/*#__PURE__*/_react["default"].createElement("span",{className:classes.highlight},"R$ ",rangeTitleValues.max)),/*#__PURE__*/_react["default"].createElement(_Slider["default"],{handleChange:function handleChange(v){setSliderValues({min:v[0],max:v[1]})},onChangeCommitted:function onChangeCommitted(event,v){_onChangeCommitted({min:v[0],max:v[1]})},values:[sliderValues.min,sliderValues.max],min:values.min,max:values.max,step:step,prefix:maskOptions.prefix}),/*#__PURE__*/_react["default"].createElement("div",{className:classes.inputContainer},/*#__PURE__*/_react["default"].createElement(_TextField["default"],{placeholder:maskOptions.prefix,currencyMask:currencyMask,label:"Inicial",rootClassName:classes.input,value:"".concat(sliderValues.min),onFocus:function onFocus(){return handleFocus("min")},onBlur:function onBlur(){return handleBlur("min")},onChange:function onChange(e){var replaceValue=e.target.value.replace(maskOptions.prefix,"").replace(".","");if(Number(replaceValue)||replaceValue===0||replaceValue===""){var newRange={min:Number(replaceValue),max:sliderValues.max};setSliderValues({min:newRange.min,max:newRange.max});handleChange(e.target.value,"min")}},error:false,type:"text",mask:true}),/*#__PURE__*/_react["default"].createElement(_TextField["default"],{placeholder:maskOptions.prefix,currencyMask:currencyMask,label:"Final",rootClassName:classes.input,value:"".concat(sliderValues.max),onFocus:function onFocus(){return handleFocus("max")},onBlur:function onBlur(){return handleBlur("max")},onChange:function onChange(e){var replaceValue=e.target.value.replace(maskOptions.prefix,"").replace(".","");if(Number(replaceValue)||replaceValue===0||replaceValue===""){var newRange={min:sliderValues.min,max:Number(replaceValue)};setSliderValues({min:newRange.min,max:newRange.max});handleChange(e.target.value,"max")}},error:false,type:"text",mask:true})))};var _default=(0,_styles.withStyles)(_styles2.styles,{withTheme:true})(FilterRange);exports["default"]=_default;
//# sourceMappingURL=FilterRange.js.map