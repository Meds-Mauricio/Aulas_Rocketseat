{"version":3,"sources":["../../src/FilterMore/FilterMore.js"],"names":["uuidv4","require","FilterMore","isOpen","filters","onApply","isMobile","label","noModal","header","className","onActives","height","item","valueOpen","setValueOpen","items","setItems","fts","map","ft","type","rangeValue","Object","assign","rangeTitleValues","min","max","rangeTextValues","open","filterActives","filter","isActive","cleanFilter","forEach","index","Filters","RANGE","OPTIONS","options","option","checked","GRID","TEXT","value","handlerReset","length","handerFilters","it","_item","itemChange","handleApply","handleClose","defaultProps","propTypes","PropTypes","bool","arrayOf","shape","string","field","func"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FilterOption from \"../FilterOption/FilterOption\";\nimport FilterText from \"../FilterText/FilterText\";\nimport FilterGrid from \"../FilterGrid/FilterGrid\";\nimport FilterRange from \"../FilterEngine/_FilterRange\";\nimport Filter from \"../Filter\";\nimport Filters from \"../Constants\";\n\nconst uuidv4 = require(\"uuid/v4\");\n\nconst FilterMore = ({\n    isOpen,\n    filters,\n    onApply,\n    isMobile,\n    label,\n    noModal,\n    header,\n    className,\n    onActives,\n    height,\n    item,\n}) => {\n    const [valueOpen, setValueOpen] = useState(false);\n    const [items, setItems] = useState([]);\n\n    useEffect(() => {\n        setValueOpen(isOpen);\n    }, [isOpen]);\n\n    useEffect(() => {\n        let fts = [...filters];\n\n        fts = fts.map(ft => {\n            if (ft.type === \"range\" && !ft.rangeValue) {\n                Object.assign(ft, { rangeTitleValues: { min: ft.min, max: ft.max } });\n                Object.assign(ft, { rangeValue: { min: ft.min, max: ft.max } });\n                Object.assign(ft, { rangeTextValues: { min: ft.min, max: ft.max } });\n                Object.assign(ft, { open: false });\n            }\n            return ft;\n        });\n\n        setItems([...fts]);\n    }, [filters]);\n\n    const filterActives = () => items.filter(filter => filter.isActive);\n\n    const cleanFilter = () => {\n        items.forEach((filter, index) => {\n            if (filter.type === Filters.RANGE) {\n                items[index].rangeValue = {\n                    min: items[index].min,\n                    max: items[index].max,\n                };\n                items[index].rangeTextValues = {\n                    min: items[index].min,\n                    max: items[index].max,\n                };\n                items[index].isActive = false;\n            }\n            if (filter.type === Filters.OPTIONS) {\n                filter.options.forEach(option => {\n                    Object.assign(option, { checked: false });\n                });\n                items[index].isActive = false;\n            }\n\n            if (filter.type === Filters.GRID) {\n                filter.options.forEach(option => {\n                    Object.assign(option, { checked: false });\n                });\n                items[index].isActive = false;\n            }\n\n            if (filter.type === Filters.TEXT) {\n                Object.assign(filter, { value: \"\" });\n                items[index].isActive = false;\n            }\n        });\n\n        setItems([...items]);\n    };\n\n    const handlerReset = () => {\n        cleanFilter();\n        onApply(items);\n        onActives(filterActives().length);\n    };\n\n\n\n    const handerFilters = () => {\n        const it = items.map((item, index) => {\n            if (item.type === Filters.RANGE) {\n                return (\n                    <FilterRange\n                        key={uuidv4()}\n                        onChange={_item => {\n                            items[index] = _item;\n                            setItems([...items]);\n                        }}\n                        values={{ min: item.rangeValue.min, max: item.rangeValue.max }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                        noModal\n                        isMobile={isMobile}\n                        index={index}\n                        filters={items}\n                        filter={item}\n                    />\n                );\n            }\n            if (item.type === Filters.OPTIONS) {\n                return (\n                    <FilterOption\n                        key={uuidv4()}\n                        isMobile={isMobile}\n                        noModal\n                        onChange={(itemChange, options) => {\n                            Object.assign(items[index].options, options);\n                            setItems([...items]);\n                        }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                        items={item.options}\n                        label={item.label}\n                    />\n                );\n            }\n            if (item.type === Filters.GRID) {\n                return (\n                    <FilterGrid\n                        isMobile={isMobile}\n                        noModal\n                        label={item.label}\n                        isAmenities\n                        items={item.options}\n                        onChange={(itemChange, options) => {\n                            Object.assign(items[index].options, options);\n                            setItems([...items]);\n                        }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                    />\n                );\n            }\n            if (item.type === Filters.TEXT) {\n                return (\n                    <FilterText\n                        onChange={value => {\n                            items[index].value = value;\n                            setItems([...items]);\n                        }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                        value={item.value}\n                        label={item.label}\n                        noModal\n                    />\n                );\n            }\n            return [];\n        });\n        return it;\n    };\n\n    const handleApply = () => {\n        onApply(items);\n        onActives(filterActives().length);\n        setValueOpen(false);\n    };\n\n    // const value =\n    //   item.filterTitle && item.filterTitle.length > 0 ? item.filterTitle : [\"\"];\n    // const isActive =\n    //   isMobile || !item.filterTitle ? false : filterActives().length > 0;\n\n    const handleClose = () => {\n        if (!isMobile) setValueOpen(false);\n        if (!item.isActive) cleanFilter();\n    };\n\n    return (\n        <Filter\n            type=\"list\"\n            more\n            isMobile={isMobile}\n            label={label}\n            noModal={noModal}\n            onOpen={() => !isMobile && setValueOpen(true)}\n            isOpen={valueOpen}\n            onClose={handleClose}\n            onApply={() => handleApply()}\n            items={handerFilters()}\n            onReset={() => handlerReset()}\n            isActive={item.isActive}\n            sufix=\"- Mais Filtros\"\n            value={item.value}\n            qtdFilters={filterActives().length}\n            // value={filterActives().length === 1 ? [1] : filterActives()}\n            disabled={!filterActives().length > 0}\n            header={header}\n            className={className}\n            height={height}\n        />\n    );\n};\n\nFilterMore.defaultProps = {\n    onApply: () => { },\n    onActives: () => { },\n    isOpen: false,\n    isMobile: false,\n    label: \"\",\n    noModal: false,\n    header: \"\",\n    filters: [],\n};\n\nFilterMore.propTypes = {\n    isOpen: PropTypes.bool,\n    filters: PropTypes.arrayOf(\n        PropTypes.shape({\n            type: PropTypes.string,\n            label: PropTypes.string,\n            field: PropTypes.string,\n        })\n    ),\n    onActives: PropTypes.func,\n    onApply: PropTypes.func,\n    isMobile: PropTypes.bool,\n    label: PropTypes.string,\n    noModal: PropTypes.bool,\n    header: PropTypes.string,\n};\n\nexport default FilterMore;\n"],"file":"FilterMore.js"}