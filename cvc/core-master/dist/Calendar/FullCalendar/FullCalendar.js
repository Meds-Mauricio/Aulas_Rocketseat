"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _ArrowLeft=_interopRequireDefault(require("@cvccorp-components/icons/dist/ArrowLeft"));var _Calendar=_interopRequireDefault(require("@cvccorp-components/icons/dist/Calendar"));var _withStyles=_interopRequireDefault(require("@material-ui/core/styles/withStyles"));var _clsx=_interopRequireDefault(require("clsx"));var _moment=_interopRequireDefault(require("moment"));var _propTypes=_interopRequireDefault(require("prop-types"));var _react=_interopRequireWildcard(require("react"));var _Animate=_interopRequireDefault(require("../../Animate"));var _Button=_interopRequireDefault(require("../../Button"));var _Overlay=_interopRequireDefault(require("../../Overlay"));var _TextField=_interopRequireDefault(require("../../TextField"));var _Typography=_interopRequireDefault(require("../../Typography"));var _Calendar2days=_interopRequireDefault(require("../Calendar2days"));var _styles=require("./styles");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}var dateExtensiveFormat=function dateExtensiveFormat(date){return(0,_moment["default"])(date,"YYYY-MM-DD").format("DD [de] MMM YYYY")};var FullCalendar=function FullCalendar(_ref){var isOutsideRange=_ref.isOutsideRange,minDate=_ref.minDate,maxDate=_ref.maxDate,classes=_ref.classes,startDateInitial=_ref.startDateInitial,endDateInitial=_ref.endDateInitial,applyLabel=_ref.applyLabel,originLabel=_ref.originLabel,destinyLabel=_ref.destinyLabel,isMobile=_ref.isMobile,onDatesChange=_ref.onDatesChange,onOpen=_ref.onOpen,onClose=_ref.onClose,isOpen=_ref.isOpen,error=_ref.error,errorMsg=_ref.errorMsg,activeTextStart=_ref.activeTextStart,activeTextEnd=_ref.activeTextEnd;var _useState=(0,_react.useState)(isOpen),_useState2=(0,_slicedToArray2["default"])(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=(0,_react.useState)(isOpen),_useState4=(0,_slicedToArray2["default"])(_useState3,2),calendarShow=_useState4[0],setCalendarShow=_useState4[1];var _useState5=(0,_react.useState)(activeTextStart),_useState6=(0,_slicedToArray2["default"])(_useState5,2),isActiveTextStart=_useState6[0],setIsActiveTextStart=_useState6[1];var _useState7=(0,_react.useState)(activeTextEnd),_useState8=(0,_slicedToArray2["default"])(_useState7,2),isActiveTextEnd=_useState8[0],setIsActiveTextEnd=_useState8[1];var _useState9=(0,_react.useState)("startDate"),_useState10=(0,_slicedToArray2["default"])(_useState9,2),inputFocus=_useState10[0],setInputFocus=_useState10[1];var _useState11=(0,_react.useState)(startDateInitial?(0,_moment["default"])(startDateInitial):null),_useState12=(0,_slicedToArray2["default"])(_useState11,2),startDate=_useState12[0],setStartDate=_useState12[1];var _useState13=(0,_react.useState)(endDateInitial?(0,_moment["default"])(endDateInitial):null),_useState14=(0,_slicedToArray2["default"])(_useState13,2),endDate=_useState14[0],setEndDate=_useState14[1];var _useState15=(0,_react.useState)(0),_useState16=(0,_slicedToArray2["default"])(_useState15,2),counterDays=_useState16[0],setCounterDays=_useState16[1];var _useState17=(0,_react.useState)(""),_useState18=(0,_slicedToArray2["default"])(_useState17,2),label1=_useState18[0],setLabel1=_useState18[1];var _useState19=(0,_react.useState)(""),_useState20=(0,_slicedToArray2["default"])(_useState19,2),label2=_useState20[0],setLabel2=_useState20[1];var _useState21=(0,_react.useState)(false),_useState22=(0,_slicedToArray2["default"])(_useState21,2),loaded=_useState22[0],setLoaded=_useState22[1];(0,_react.useEffect)(function(){setLoaded(true);setLabel1(originLabel||"Data de ida");setLabel2(destinyLabel||"Data de volta")},[]);(0,_react.useEffect)(function(){if(startDateInitial)setStartDate((0,_moment["default"])(startDateInitial))},[startDateInitial]);(0,_react.useEffect)(function(){if(endDateInitial)setEndDate((0,_moment["default"])(endDateInitial))},[endDateInitial]);(0,_react.useEffect)(function(){setIsActiveTextStart(activeTextStart)},[activeTextStart]);(0,_react.useEffect)(function(){setIsActiveTextEnd(activeTextEnd)},[activeTextEnd]);(0,_react.useEffect)(function(){if(startDate!==null&&endDate!==null){var _counterDays=endDate===null||endDate===void 0?void 0:endDate.diff(startDate,"days");setCounterDays(_counterDays)}},[startDate,endDate]);var setDates=function setDates(dates){switch(inputFocus){case"startDate":setEndDate(null);setStartDate(dates.startDate);break;case"endDate":setEndDate(dates.endDate);break;default:break;}dates.endDate!==null&&!isMobile?setShow(true):handleOpen();onDatesChange(dates)};var handleOpen=function handleOpen(e){setShow(true);setCalendarShow(true);setIsActiveTextStart(true);if(onOpen)onOpen(e);if(typeof window!=="undefined"){if(isMobile)document.body.classList.add("stop-scroll")}};var handleClose=function handleClose(e){setShow(false);var closeCalendar=setTimeout(function(){setCalendarShow(false)},5000);clearTimeout(closeCalendar);if(onClose)onClose(e);if(typeof window!=="undefined"){if(isMobile)document.body.classList.remove("stop-scroll")}};var handleClear=function handleClear(){setStartDate(null);setEndDate(null);setCounterDays(0)};var apply=function apply(){if(endDate!==null&&startDate!==null)handleClose()};var mountlabelButton=function mountlabelButton(){if(isMobile){if(counterDays>0){var daysWord="di\xE1ria".concat(counterDays>1?"s":"");return"Selecionar ".concat(counterDays," ").concat(daysWord," ")}return"Selecionar"}else{if(counterDays>0){var _daysWord="dia".concat(counterDays>1?"s":"");return"Viagem de ".concat(counterDays," ").concat(_daysWord," ")}return""}};var _useState23=(0,_react.useState)(false),_useState24=(0,_slicedToArray2["default"])(_useState23,2),isOpenAnimation=_useState24[0],setOpenAnimation=_useState24[1];var onOpenAnimate=function onOpenAnimate(){setOpenAnimation(true)};var onCloseAnimate=function onCloseAnimate(){setOpenAnimation(false)};return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null," ",loaded&&!isMobile?/*#__PURE__*/_react["default"].createElement("div",{className:classes.containerDates},/*#__PURE__*/_react["default"].createElement(_TextField["default"],{icon:/*#__PURE__*/_react["default"].createElement(_Calendar["default"],{className:classes.calendarIcon}),size:"large",disabled:true,label:"Data de ida",value:startDate!==null?"".concat(startDate!==null&&startDate._isValid?dateExtensiveFormat(startDate):label1):"",onClick:function onClick(){return handleOpen()},error:error,errorMsg:errorMsg,inputClassName:(0,_clsx["default"])(classes.input,classes.inputLeft,classes.inputDate),labelClassName:(0,_clsx["default"])(classes.input,classes.inputDate),noBorder:true}),/*#__PURE__*/_react["default"].createElement("div",{className:classes.dateSeparator}),/*#__PURE__*/_react["default"].createElement(_TextField["default"],{icon:/*#__PURE__*/_react["default"].createElement(_Calendar["default"],{className:classes.calendarIcon}),size:"large",disabled:true,label:"Data de volta",value:endDate!==null?"".concat(endDate!==null&&endDate._isValid?dateExtensiveFormat(endDate):label2):"",onClick:function onClick(){return handleOpen()},error:error,errorMsg:errorMsg,inputClassName:(0,_clsx["default"])(classes.input,classes.inputRight,classes.inputDate),labelClassName:(0,_clsx["default"])(classes.input,classes.inputDate),noBorder:true})):/*#__PURE__*/_react["default"].createElement(_TextField["default"],{icon:/*#__PURE__*/_react["default"].createElement(_Calendar["default"],{className:classes.calendarIcon}),size:"large",disabled:true,label:"Escolha as datas",value:startDate!==null||endDate!==null?"".concat(startDate!==null&&startDate._isValid?dateExtensiveFormat(startDate):label1," - ").concat(endDate!==null&&endDate._isValid?dateExtensiveFormat(endDate):label2):"",onClick:function onClick(){return handleOpen()},error:error,errorMsg:errorMsg,inputClassName:(0,_clsx["default"])(classes.inputMobile,classes.inputRadius,classes.inputDate),labelClassName:(0,_clsx["default"])(classes.inputMobile,classes.inputDate),noBorder:true})," ",/*#__PURE__*/_react["default"].createElement(_Animate["default"],{isOpen:show,onOpen:onOpenAnimate,onClose:onCloseAnimate},/*#__PURE__*/_react["default"].createElement(_Overlay["default"],{onClick:function onClick(){return handleClose()}})," ",/*#__PURE__*/_react["default"].createElement("div",{className:"".concat(classes.calendar," ").concat(!isOpenAnimation&&classes.closed)},/*#__PURE__*/_react["default"].createElement("div",{className:classes.container},/*#__PURE__*/_react["default"].createElement("div",{className:isMobile?classes.headerMob:classes.header},/*#__PURE__*/_react["default"].createElement("div",{className:isMobile?classes.itensHeaderMob:classes.itensHeader},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1bold",className:classes.title,onClick:function onClick(){isMobile&&handleClose()}},isMobile&&/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement(_ArrowLeft["default"],{className:classes.icon}),"Escolha as datas")),/*#__PURE__*/_react["default"].createElement("div",{className:classes.containerBtn},startDate&&endDate&&/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:classes.buttonClear,label:"Limpar datas",onClick:function onClick(){return handleClear()}}))),/*#__PURE__*/_react["default"].createElement("div",{className:isMobile?classes.datesMob:classes.dates},/*#__PURE__*/_react["default"].createElement("div",{className:classes.datesItem},/*#__PURE__*/_react["default"].createElement(_TextField["default"],{icon:/*#__PURE__*/_react["default"].createElement(_Calendar["default"],{className:classes.calendarIcon}),size:"large",placeholder:label1,error:error,errorMsg:errorMsg,inputClassName:(0,_clsx["default"])(classes.inputInside,classes.inputLeft,classes.inputDate),labelClassName:classes.inputInside,rootClassName:(0,_clsx["default"])(classes.rootInput,classes.separator,isMobile?classes.inputRadiusMobile:""),value:startDate!==null&&startDate._isValid?dateExtensiveFormat(startDate):"",disabled:true,noBorder:true})),/*#__PURE__*/_react["default"].createElement("div",{className:classes.datesItem},/*#__PURE__*/_react["default"].createElement(_TextField["default"],{icon:/*#__PURE__*/_react["default"].createElement(_Calendar["default"],{className:classes.calendarIcon}),size:"large",placeholder:label2,error:error,errorMsg:errorMsg,inputClassName:(0,_clsx["default"])(classes.inputInside,classes.inputRight,classes.inputDate),labelClassName:classes.inputInside,rootClassName:classes.rootInput,value:endDate!==null&&endDate._isValid?dateExtensiveFormat(endDate):"",disabled:true,noBorder:true})))),/*#__PURE__*/_react["default"].createElement("div",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Calendar2days["default"],{minDate:minDate,maxDate:maxDate,startDate:startDate,endDate:endDate,onDatesChange:function onDatesChange(dates){return setDates(dates)},isMobile:isMobile,focus:inputFocus,isOutsideRange:isOutsideRange,onFocusChange:function onFocusChange(e){setInputFocus(e)}})," ")," ",!isMobile&&/*#__PURE__*/_react["default"].createElement("div",{className:classes.footerContainer},/*#__PURE__*/_react["default"].createElement("div",{className:classes.footerDayCounter},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body2semibold"}," ",mountlabelButton())),/*#__PURE__*/_react["default"].createElement("div",{className:classes.footerConfirmButton},/*#__PURE__*/_react["default"].createElement(_Button["default"],{className:classes.btnApply,color:"secondary",label:"Selecionar",variant:"contained",disabled:startDate===null||endDate===null,onClick:function onClick(){return handleClose()}}))),isMobile&&/*#__PURE__*/_react["default"].createElement("div",{className:"".concat(classes.footer," ").concat(show&&classes.showFooter)},/*#__PURE__*/_react["default"].createElement(_Button["default"],{color:"secondary",variant:"contained",fullWidth:true,label:applyLabel||mountlabelButton(),onClick:function onClick(){return apply()}}))," ")," ")," ")," ")};FullCalendar.propTypes={classes:_propTypes["default"].object.isRequired,onDatesChange:_propTypes["default"].func.isRequired,isOutsideRange:_propTypes["default"].number};var _default=(0,_withStyles["default"])(_styles.styles,{withTheme:true})(FullCalendar);exports["default"]=_default;
//# sourceMappingURL=FullCalendar.js.map