"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _moment=_interopRequireDefault(require("moment"));var _propTypes=_interopRequireDefault(require("prop-types"));var _withStyles=_interopRequireDefault(require("@material-ui/core/styles/withStyles"));var _Calendar=_interopRequireDefault(require("@cvccorp-components/icons/dist/Calendar"));var _ArrowLeft=_interopRequireDefault(require("@cvccorp-components/icons/dist/ArrowLeft"));var _Calendar1day=_interopRequireDefault(require("../Calendar1day"));var _TextField=_interopRequireDefault(require("../../TextField"));var _Typography=_interopRequireDefault(require("../../Typography"));var _Button=_interopRequireDefault(require("../../Button"));var _Overlay=_interopRequireDefault(require("../../Overlay"));var _styles=require("./styles");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}var dateExtensiveFormat=function dateExtensiveFormat(date){return(0,_moment["default"])(date,"YYYY-MM-DD").format("DD [de] MMM YYYY")};var FullCalendar1day=function FullCalendar1day(props){var classes=props.classes,date=props.date,selectedDate=props.selectedDate,_isOutsideRange=props.isOutsideRange;var _useState=(0,_react.useState)(props.isOpen),_useState2=(0,_slicedToArray2["default"])(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=(0,_react.useState)(date?(0,_moment["default"])(date):null),_useState4=(0,_slicedToArray2["default"])(_useState3,2),startDate=_useState4[0],setStartDate=_useState4[1];var setDate=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(date){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setStartDate(date);!props.isMobile&&date!==undefined?handleClose():!props.isMobile?setShow(true):handleOpen();props.onDateChange(date);case 3:case"end":return _context.stop();}}},_callee)}));return function setDate(_x){return _ref.apply(this,arguments)}}();var handleOpen=function handleOpen(e){setShow(true);if(props.onOpen)props.onOpen(e);if(typeof window!=="undefined"){if(props.isMobile)document.body.classList.add("stop-scroll")}};var handleClose=function handleClose(e){setShow(false);if(props.onClose)props.onClose(e);if(typeof window!=="undefined"){if(props.isMobile)document.body.classList.remove("stop-scroll")}};var apply=function apply(){if(startDate!==null)handleClose()};return/*#__PURE__*/_react["default"].createElement(_react["default"].Fragment,null,/*#__PURE__*/_react["default"].createElement(_TextField["default"],{icon:/*#__PURE__*/_react["default"].createElement(_Calendar["default"],null),size:"large",disabled:true,label:"Escolha a data",value:startDate!==null?"".concat(startDate!==null?dateExtensiveFormat(startDate):props.label):"",transparent:true,onClick:function onClick(){return handleOpen()},error:props.error,errorMsg:props.errorMsg,inputClassName:classes.input,labelClassName:classes.input,noBorder:true})," ",show&&/*#__PURE__*/_react["default"].createElement(_Overlay["default"],{onClick:function onClick(){return handleClose()}})," ",/*#__PURE__*/_react["default"].createElement("div",{className:"".concat(classes.calendar," ").concat(!show&&classes.closed)},/*#__PURE__*/_react["default"].createElement("div",{className:classes.container},/*#__PURE__*/_react["default"].createElement("div",{className:classes.header,onClick:function onClick(){props.isMobile&&handleClose()}},/*#__PURE__*/_react["default"].createElement(_Typography["default"],{type:"body1regular",className:classes.title}," ",props.isMobile?/*#__PURE__*/_react["default"].createElement(_ArrowLeft["default"],{className:classes.icon}):/*#__PURE__*/_react["default"].createElement(_Calendar["default"],{className:classes.icon}),"Escolha a data"," ")," ",/*#__PURE__*/_react["default"].createElement("div",{className:classes.dates},/*#__PURE__*/_react["default"].createElement("div",{className:classes.datesItem},/*#__PURE__*/_react["default"].createElement(_TextField["default"],{readonly:true,label:props.label,onFocus:function onFocus(){return handleOpen()},value:startDate!==null?dateExtensiveFormat(startDate):"",className:classes.dateInput})," ")," ")," ")," ",/*#__PURE__*/_react["default"].createElement("div",{className:classes.content},/*#__PURE__*/_react["default"].createElement(_Calendar1day["default"],{date:startDate,onDateChange:function onDateChange(date){return setDate(date)},selectedDate:selectedDate&&selectedDate!==undefined&&!!selectedDate.length&&selectedDate,isMobile:props.isMobile,isOutsideRange:function isOutsideRange(day){return day.isBefore((0,_moment["default"])("2020-06-01"))||_isOutsideRange&&_isOutsideRange(day)}})," ")," ",props.isMobile&&/*#__PURE__*/_react["default"].createElement("div",{className:"".concat(classes.footer," ").concat(show&&classes.showFooter)},/*#__PURE__*/_react["default"].createElement(_Button["default"],{color:"secondary",variant:"contained",fullWidth:true,label:"Aplicar",onClick:function onClick(){return apply()}})," ")," ")," ")," ")};FullCalendar1day.propTypes={classes:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].object]).isRequired,onDateChange:_propTypes["default"].func.isRequired,label:_propTypes["default"].string.isRequired,// eslint-disable-next-line react/require-default-props
isOutsideRange:_propTypes["default"].func};var _default=(0,_withStyles["default"])(_styles.styles,{withTheme:true})(FullCalendar1day);exports["default"]=_default;
//# sourceMappingURL=FullCalendar1day.js.map