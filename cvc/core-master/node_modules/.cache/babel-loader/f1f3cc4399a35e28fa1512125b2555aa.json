{"ast":null,"code":"import _slicedToArray from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\n/* eslint-disable no-restricted-syntax */\n\n/* eslint-disable prefer-rest-params */\nimport * as React from \"react\";\n\nif (typeof window !== \"undefined\") {\n  var originalSetItem = localStorage.setItem; // eslint-disable-next-line func-names\n\n  localStorage.setItem = function (key, value) {\n    if (key.startsWith(\"CognitoIdentityServiceProvider\") && key.endsWith(\"idToken\")) {\n      var event = new CustomEvent(\"setCognitoIdToken\", {\n        \"detail\": {\n          \"key\": key,\n          \"value\": value\n        }\n      });\n      document.dispatchEvent(event);\n    }\n\n    originalSetItem.apply(this, [key, value]);\n  };\n\n  var originalRemoveItem = localStorage.removeItem; // eslint-disable-next-line func-names\n\n  localStorage.removeItem = function (key) {\n    if (key.startsWith(\"CognitoIdentityServiceProvider\") && key.endsWith(\"idToken\")) {\n      var event = new Event(\"removeCognitoIdToken\");\n      document.dispatchEvent(event);\n    }\n\n    originalRemoveItem.apply(this, [key]);\n  };\n} // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\nfunction useLocalStorage() {\n  _s();\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      cognitoIdToken = _React$useState2[0],\n      setIdToken = _React$useState2[1];\n\n  var getCognitoIdToken = function getCognitoIdToken(e) {\n    var customEvent = e;\n    setIdToken(customEvent.detail.value);\n  };\n\n  var deleteCognitoServiceProvider = function deleteCognitoServiceProvider() {\n    // eslint-disable-next-line vars-on-top\n    for (var _i = 0, _Object$keys = Object.keys(localStorage); _i < _Object$keys.length; _i++) {\n      var key = _Object$keys[_i];\n\n      if (key.startsWith(\"CognitoIdentityServiceProvider\")) {\n        localStorage.removeItem(key);\n      }\n    }\n  };\n\n  var removeCognitoIdToken = function removeCognitoIdToken() {\n    setIdToken(undefined);\n  };\n\n  React.useEffect(function () {\n    document.addEventListener(\"setCognitoIdToken\", getCognitoIdToken, false);\n    document.addEventListener(\"removeCognitoIdToken\", removeCognitoIdToken, false);\n    return function () {\n      return document.removeEventListener(\"storageChange\", getCognitoIdToken);\n    };\n  }, []);\n  return {\n    cognitoIdToken: cognitoIdToken,\n    deleteCognitoServiceProvider: deleteCognitoServiceProvider\n  };\n}\n\n_s(useLocalStorage, \"b0QhkLsUl4TtKAALIcZrLOzjOUk=\");\n\nexport default useLocalStorage;","map":{"version":3,"sources":["C:/Users/felip/OneDrive/Dokumente/cvc/core-master/src/UserArea/CognitoIdTokenUpdate.ts"],"names":["React","window","originalSetItem","localStorage","setItem","key","value","startsWith","endsWith","event","CustomEvent","document","dispatchEvent","apply","originalRemoveItem","removeItem","Event","useLocalStorage","useState","cognitoIdToken","setIdToken","getCognitoIdToken","e","customEvent","detail","deleteCognitoServiceProvider","Object","keys","removeCognitoIdToken","undefined","useEffect","addEventListener","removeEventListener"],"mappings":";;;;AAAA;;AACA;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;AAEA,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AAC/B,MAAMC,eAAe,GAAGC,YAAY,CAACC,OAArC,CAD+B,CAE/B;;AACAD,EAAAA,YAAY,CAACC,OAAb,GAAuB,UAAUC,GAAV,EAAuBC,KAAvB,EAAsC;AACzD,QAAID,GAAG,CAACE,UAAJ,CAAe,gCAAf,KAAoDF,GAAG,CAACG,QAAJ,CAAa,SAAb,CAAxD,EAAiF;AAC7E,UAAMC,KAAK,GAAG,IAAIC,WAAJ,CAAgB,mBAAhB,EAAqC;AAC/C,kBAAU;AAAE,iBAAOL,GAAT;AAAc,mBAASC;AAAvB;AADqC,OAArC,CAAd;AAGAK,MAAAA,QAAQ,CAACC,aAAT,CAAuBH,KAAvB;AAEH;;AACDP,IAAAA,eAAe,CAACW,KAAhB,CAAsB,IAAtB,EAA4B,CAACR,GAAD,EAAMC,KAAN,CAA5B;AACH,GATD;;AAWA,MAAMQ,kBAAkB,GAAIX,YAAY,CAACY,UAAzC,CAd+B,CAgB/B;;AACAZ,EAAAA,YAAY,CAACY,UAAb,GAA0B,UAAUV,GAAV,EAAuB;AAC7C,QAAIA,GAAG,CAACE,UAAJ,CAAe,gCAAf,KAAoDF,GAAG,CAACG,QAAJ,CAAa,SAAb,CAAxD,EAAiF;AAC7E,UAAMC,KAAK,GAAG,IAAIO,KAAJ,CAAU,sBAAV,CAAd;AACAL,MAAAA,QAAQ,CAACC,aAAT,CAAuBH,KAAvB;AACH;;AACDK,IAAAA,kBAAkB,CAACD,KAAnB,CAAyB,IAAzB,EAA+B,CAACR,GAAD,CAA/B;AACH,GAND;AAOH,C,CACD;;;AACA,SAASY,eAAT,GAA2B;AAAA;;AAEvB,wBAAqCjB,KAAK,CAACkB,QAAN,EAArC;AAAA;AAAA,MAAOC,cAAP;AAAA,MAAuBC,UAAvB;;AAEA,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,CAAD,EAAc;AACpC,QAAMC,WAAwB,GAAGD,CAAjC;AACAF,IAAAA,UAAU,CAACG,WAAW,CAACC,MAAZ,CAAmBlB,KAApB,CAAV;AACH,GAHD;;AAKA,MAAMmB,4BAA4B,GAAG,SAA/BA,4BAA+B,GAAM;AACvC;AACA,oCAAgBC,MAAM,CAACC,IAAP,CAAYxB,YAAZ,CAAhB,kCAA2C;AAAtC,UAAIE,GAAG,mBAAP;;AACD,UAAIA,GAAG,CAACE,UAAJ,CAAe,gCAAf,CAAJ,EAAsD;AAClDJ,QAAAA,YAAY,CAACY,UAAb,CAAwBV,GAAxB;AACH;AACJ;AACJ,GAPD;;AASA,MAAMuB,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AAC/BR,IAAAA,UAAU,CAACS,SAAD,CAAV;AAEH,GAHD;;AAKA7B,EAAAA,KAAK,CAAC8B,SAAN,CAAgB,YAAM;AAClBnB,IAAAA,QAAQ,CAACoB,gBAAT,CAA0B,mBAA1B,EACIV,iBADJ,EAEI,KAFJ;AAIAV,IAAAA,QAAQ,CAACoB,gBAAT,CAA0B,sBAA1B,EACIH,oBADJ,EAEI,KAFJ;AAIA,WAAO;AAAA,aAAMjB,QAAQ,CAACqB,mBAAT,CAA6B,eAA7B,EAA8CX,iBAA9C,CAAN;AAAA,KAAP;AACH,GAVD,EAUG,EAVH;AAYA,SAAO;AAAEF,IAAAA,cAAc,EAAdA,cAAF;AAAkBM,IAAAA,4BAA4B,EAA5BA;AAAlB,GAAP;AACH;;GApCQR,e;;AAsCT,eAAeA,eAAf","sourcesContent":["/* eslint-disable no-restricted-syntax */\n/* eslint-disable prefer-rest-params */\nimport * as React from \"react\"\n\nif (typeof window !== \"undefined\") {\n    const originalSetItem = localStorage.setItem\n    // eslint-disable-next-line func-names\n    localStorage.setItem = function (key: string, value: string) {\n        if (key.startsWith(\"CognitoIdentityServiceProvider\") && key.endsWith(\"idToken\")) {\n            const event = new CustomEvent(\"setCognitoIdToken\", {\n                \"detail\": { \"key\": key, \"value\": value }\n            })\n            document.dispatchEvent(event)\n\n        }\n        originalSetItem.apply(this, [key, value])\n    }\n\n    const originalRemoveItem =  localStorage.removeItem\n\n    // eslint-disable-next-line func-names\n    localStorage.removeItem = function (key: string) {\n        if (key.startsWith(\"CognitoIdentityServiceProvider\") && key.endsWith(\"idToken\")) {\n            const event = new Event(\"removeCognitoIdToken\")\n            document.dispatchEvent(event)\n        }\n        originalRemoveItem.apply(this, [key])\n    }\n}\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction useLocalStorage() {\n\n    const [cognitoIdToken, setIdToken] = React.useState<string | null | undefined>()\n\n    const getCognitoIdToken = (e: Event) => {\n        const customEvent: CustomEvent = e as CustomEvent;\n        setIdToken(customEvent.detail.value);\n    }\n\n    const deleteCognitoServiceProvider = () => {\n        // eslint-disable-next-line vars-on-top\n        for (var key of Object.keys(localStorage)) {\n            if (key.startsWith(\"CognitoIdentityServiceProvider\")) {\n                localStorage.removeItem(key)\n            }\n        }\n    }\n\n    const removeCognitoIdToken = () => {\n        setIdToken(undefined);\n\n    }\n\n    React.useEffect(() => {\n        document.addEventListener(\"setCognitoIdToken\",\n            getCognitoIdToken,\n            false)\n\n        document.addEventListener(\"removeCognitoIdToken\",\n            removeCognitoIdToken,\n            false)\n\n        return () => document.removeEventListener(\"storageChange\", getCognitoIdToken)\n    }, [])\n\n    return { cognitoIdToken, deleteCognitoServiceProvider }\n}\n\nexport default useLocalStorage\n"]},"metadata":{},"sourceType":"module"}