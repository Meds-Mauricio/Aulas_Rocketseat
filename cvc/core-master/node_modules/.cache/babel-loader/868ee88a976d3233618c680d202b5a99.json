{"ast":null,"code":"import _objectSpread from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\felip\\\\OneDrive\\\\Dokumente\\\\cvc\\\\core-master\\\\src\\\\MyTravelLogin\\\\UserAccessSteps\\\\ForgotPassword\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport Link from \"@material-ui/core/Link\";\nimport useStyles from \"./styles\";\nimport translate from \"../../shared/i18n/translate\";\nimport Terms from \"../../shared/components/Terms\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport Title from \"../../shared/components/Title\";\nimport SubTitle from \"../../shared/components/SubTitle\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport { injectIntl } from \"react-intl\";\nimport { Auth } from \"aws-amplify\";\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport useGa from '../../../utils/useGa';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar ForgotPassword = function ForgotPassword(_ref) {\n  _s();\n\n  var intl = _ref.intl,\n      onCloseClick = _ref.onCloseClick,\n      isModal = _ref.isModal;\n  var classes = useStyles({});\n\n  var _useGa = useGa(),\n      saveOnGa = _useGa.saveOnGa;\n\n  var _useRenderSteps = useRenderSteps(),\n      renderNewStep = _useRenderSteps.renderNewStep,\n      setPreviousStep = _useRenderSteps.setPreviousStep;\n\n  var _useAuthAmplifyContex = useAuthAmplifyContext(),\n      setAuthAmplify = _useAuthAmplifyContex.setAuthAmplify;\n\n  var _useUserData = useUserData(),\n      user = _useUserData.user,\n      setUser = _useUserData.setUser;\n\n  useEffect(function () {\n    setPreviousStep(\"Password\");\n  }, []);\n\n  var handleValidationCode = function handleValidationCode() {\n    return new Promise( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return Auth.forgotPassword(user.email);\n\n              case 3:\n                saveOnGa({\n                  event: \"login_event\",\n                  category: \"Account\",\n                  action: \"Recovery Password\",\n                  label: \"step 2 | redefine password\"\n                });\n                setAuthAmplify(\"ChangePassword\");\n                renderNewStep(\"ValidationCode\");\n                _context.next = 10;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n\n              case 10:\n                return _context.abrupt(\"return\", resolve);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  };\n\n  var handleMainScreen = function handleMainScreen() {\n    setUser(_objectSpread(_objectSpread({}, user), {}, {\n      email: \"\"\n    }));\n    saveOnGa({\n      event: \"login_event\",\n      category: \"Account\",\n      action: \"Change email\",\n      label: \"action :: change email\"\n    });\n    renderNewStep(\"MainScreen\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(HeaderLogin, {\n        isModal: isModal,\n        previousStep: \"Password\",\n        onCloseClick: onCloseClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Title, {\n        className: classes.title,\n        children: translate({\n          id: \"ForgotPassword.title\"\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(SubTitle, {\n        className: classes.subTitle,\n        children: translate({\n          id: \"ForgotPassword.subTitle\"\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(SubTitle, {\n        variant: \"caption\",\n        className: classes.subTitleNoMargin,\n        children: user ? user.email : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Link, {\n        onClick: handleMainScreen,\n        className: classes.changeEmail,\n        children: /*#__PURE__*/_jsxDEV(SubTitle, {\n          variant: \"caption\",\n          className: classes.subTitleLinkChangeEmail,\n          children: translate({\n            id: \"ForgotPassword.linkChangeEmail\"\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.buttonContainer,\n        children: /*#__PURE__*/_jsxDEV(InternalButton, {\n          text: intl.formatMessage({\n            id: \"ForgotPassword.actionButton\"\n          }),\n          handlerClick: handleValidationCode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Terms, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(ForgotPassword, \"RniKwi6urw9ruSWp7sAqi/AMmAE=\", false, function () {\n  return [useStyles, useGa, useRenderSteps, useAuthAmplifyContext, useUserData];\n});\n\n_c = ForgotPassword;\nexport default _c2 = injectIntl(ForgotPassword);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ForgotPassword\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/felip/OneDrive/Dokumente/cvc/core-master/src/MyTravelLogin/UserAccessSteps/ForgotPassword/index.tsx"],"names":["React","useEffect","Link","useStyles","translate","Terms","useRenderSteps","Title","SubTitle","useUserData","InternalButton","injectIntl","Auth","useAuthAmplifyContext","HeaderLogin","useGa","ForgotPassword","intl","onCloseClick","isModal","classes","saveOnGa","renderNewStep","setPreviousStep","setAuthAmplify","user","setUser","handleValidationCode","Promise","resolve","forgotPassword","email","event","category","action","label","handleMainScreen","root","title","id","subTitle","subTitleNoMargin","changeEmail","subTitleLinkChangeEmail","buttonContainer","formatMessage"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport Link from \"@material-ui/core/Link\";\nimport useStyles from \"./styles\";\nimport translate from \"../../shared/i18n/translate\";\nimport Terms from \"../../shared/components/Terms\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport Title from \"../../shared/components/Title\";\nimport SubTitle from \"../../shared/components/SubTitle\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport { injectIntl, IntlShape } from \"react-intl\";\nimport { Auth } from \"aws-amplify\";\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport useGa from '../../../utils/useGa';\n\ninterface IForgotPassword {\n    intl: IntlShape;\n    onCloseClick?(): void;\n    isModal?: boolean;\n}\n\nconst ForgotPassword: React.FC<IForgotPassword> = ({ intl, onCloseClick, isModal }) => {\n\n    const classes = useStyles({});\n    const { saveOnGa } = useGa();\n    const { renderNewStep, setPreviousStep } = useRenderSteps();\n    const { setAuthAmplify } = useAuthAmplifyContext();\n    const { user, setUser } = useUserData();\n    useEffect(() => {\n        setPreviousStep(\"Password\");\n    }, []);\n    const handleValidationCode = () => new Promise(async (resolve) => {\n        try {\n            await Auth.forgotPassword(user.email);\n            saveOnGa({\n                event: \"login_event\",\n                category: \"Account\",\n                action: \"Recovery Password\",\n                label: \"step 2 | redefine password\"\n            });\n            setAuthAmplify(\"ChangePassword\");\n            renderNewStep(\"ValidationCode\");\n        } catch (error) {\n            // exibir error servidor\n        }\n        return resolve;\n\n\n    });\n    const handleMainScreen = () => {\n        setUser({\n            ...user,\n            email: \"\"\n        });\n\n        saveOnGa({\n            event: \"login_event\",\n            category: \"Account\",\n            action: \"Change email\",\n            label: \"action :: change email\"\n        });\n        renderNewStep(\"MainScreen\");\n    };\n    return (\n        <>\n            <div className={classes.root}>\n                <HeaderLogin isModal={isModal} previousStep=\"Password\" onCloseClick={onCloseClick} />\n                <Title className={classes.title}>\n                    {translate({ id: \"ForgotPassword.title\" })}\n                </Title>\n                <SubTitle className={classes.subTitle}>\n                    {translate({ id: \"ForgotPassword.subTitle\" })}\n                </SubTitle>\n                <SubTitle variant=\"caption\" className={classes.subTitleNoMargin}>\n                    {user ? user.email : \"\"}\n                </SubTitle>\n                <Link onClick={(handleMainScreen)} className={classes.changeEmail}>\n                    <SubTitle variant=\"caption\" className={classes.subTitleLinkChangeEmail}>\n                        {translate({ id: \"ForgotPassword.linkChangeEmail\" })}\n                    </SubTitle>\n                </Link>\n\n                <div className={classes.buttonContainer}>\n                    <InternalButton\n                        text={intl.formatMessage({ id: \"ForgotPassword.actionButton\" })}\n                        handlerClick={handleValidationCode}\n                    />\n                </div>\n\n            </div>\n            <Terms />\n        </>\n    );\n};\n\nexport default injectIntl(ForgotPassword);\n"]},"metadata":{},"sourceType":"module"}