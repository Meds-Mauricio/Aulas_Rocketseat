{"ast":null,"code":"import _toConsumableArray from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\felip\\\\OneDrive\\\\Dokumente\\\\cvc\\\\core-master\\\\src\\\\FilterMore\\\\FilterMore.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FilterOption from \"../FilterOption/FilterOption\";\nimport FilterText from \"../FilterText/FilterText\";\nimport FilterGrid from \"../FilterGrid/FilterGrid\";\nimport FilterRange from \"../FilterEngine/_FilterRange\";\nimport Filter from \"../Filter\";\nimport Filters from \"../Constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar uuidv4 = require(\"uuid/v4\");\n\nvar FilterMore = function FilterMore(_ref) {\n  _s();\n\n  var isOpen = _ref.isOpen,\n      filters = _ref.filters,\n      onApply = _ref.onApply,\n      isMobile = _ref.isMobile,\n      label = _ref.label,\n      noModal = _ref.noModal,\n      header = _ref.header,\n      className = _ref.className,\n      onActives = _ref.onActives,\n      height = _ref.height,\n      item = _ref.item;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      valueOpen = _useState2[0],\n      setValueOpen = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      items = _useState4[0],\n      setItems = _useState4[1];\n\n  useEffect(function () {\n    setValueOpen(isOpen);\n  }, [isOpen]);\n  useEffect(function () {\n    var fts = _toConsumableArray(filters);\n\n    fts = fts.map(function (ft) {\n      if (ft.type === \"range\" && !ft.rangeValue) {\n        Object.assign(ft, {\n          rangeTitleValues: {\n            min: ft.min,\n            max: ft.max\n          }\n        });\n        Object.assign(ft, {\n          rangeValue: {\n            min: ft.min,\n            max: ft.max\n          }\n        });\n        Object.assign(ft, {\n          rangeTextValues: {\n            min: ft.min,\n            max: ft.max\n          }\n        });\n        Object.assign(ft, {\n          open: false\n        });\n      }\n\n      return ft;\n    });\n    setItems(_toConsumableArray(fts));\n  }, [filters]);\n\n  var filterActives = function filterActives() {\n    return items.filter(function (filter) {\n      return filter.isActive;\n    });\n  };\n\n  var cleanFilter = function cleanFilter() {\n    items.forEach(function (filter, index) {\n      if (filter.type === Filters.RANGE) {\n        items[index].rangeValue = {\n          min: items[index].min,\n          max: items[index].max\n        };\n        items[index].rangeTextValues = {\n          min: items[index].min,\n          max: items[index].max\n        };\n        items[index].isActive = false;\n      }\n\n      if (filter.type === Filters.OPTIONS) {\n        filter.options.forEach(function (option) {\n          Object.assign(option, {\n            checked: false\n          });\n        });\n        items[index].isActive = false;\n      }\n\n      if (filter.type === Filters.GRID) {\n        filter.options.forEach(function (option) {\n          Object.assign(option, {\n            checked: false\n          });\n        });\n        items[index].isActive = false;\n      }\n\n      if (filter.type === Filters.TEXT) {\n        Object.assign(filter, {\n          value: \"\"\n        });\n        items[index].isActive = false;\n      }\n    });\n    setItems(_toConsumableArray(items));\n  };\n\n  var handlerReset = function handlerReset() {\n    cleanFilter();\n    onApply(items);\n    onActives(filterActives().length);\n  };\n\n  var handerFilters = function handerFilters() {\n    var it = items.map(function (item, index) {\n      if (item.type === Filters.RANGE) {\n        return /*#__PURE__*/_jsxDEV(FilterRange, {\n          onChange: function onChange(_item) {\n            items[index] = _item;\n            setItems(_toConsumableArray(items));\n          },\n          values: {\n            min: item.rangeValue.min,\n            max: item.rangeValue.max\n          },\n          onActive: function onActive(isActive) {\n            items[index].isActive = isActive;\n            setItems(_toConsumableArray(items));\n          },\n          noModal: true,\n          isMobile: isMobile,\n          index: index,\n          filters: items,\n          filter: item\n        }, uuidv4(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, _this);\n      }\n\n      if (item.type === Filters.OPTIONS) {\n        return /*#__PURE__*/_jsxDEV(FilterOption, {\n          isMobile: isMobile,\n          noModal: true,\n          onChange: function onChange(itemChange, options) {\n            Object.assign(items[index].options, options);\n            setItems(_toConsumableArray(items));\n          },\n          onActive: function onActive(isActive) {\n            items[index].isActive = isActive;\n            setItems(_toConsumableArray(items));\n          },\n          items: item.options,\n          label: item.label\n        }, uuidv4(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, _this);\n      }\n\n      if (item.type === Filters.GRID) {\n        return /*#__PURE__*/_jsxDEV(FilterGrid, {\n          isMobile: isMobile,\n          noModal: true,\n          label: item.label,\n          isAmenities: true,\n          items: item.options,\n          onChange: function onChange(itemChange, options) {\n            Object.assign(items[index].options, options);\n            setItems(_toConsumableArray(items));\n          },\n          onActive: function onActive(isActive) {\n            items[index].isActive = isActive;\n            setItems(_toConsumableArray(items));\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, _this);\n      }\n\n      if (item.type === Filters.TEXT) {\n        return /*#__PURE__*/_jsxDEV(FilterText, {\n          onChange: function onChange(value) {\n            items[index].value = value;\n            setItems(_toConsumableArray(items));\n          },\n          onActive: function onActive(isActive) {\n            items[index].isActive = isActive;\n            setItems(_toConsumableArray(items));\n          },\n          value: item.value,\n          label: item.label,\n          noModal: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, _this);\n      }\n\n      return [];\n    });\n    return it;\n  };\n\n  var handleApply = function handleApply() {\n    onApply(items);\n    onActives(filterActives().length);\n    setValueOpen(false);\n  }; // const value =\n  //   item.filterTitle && item.filterTitle.length > 0 ? item.filterTitle : [\"\"];\n  // const isActive =\n  //   isMobile || !item.filterTitle ? false : filterActives().length > 0;\n\n\n  var handleClose = function handleClose() {\n    if (!isMobile) setValueOpen(false);\n    if (!item.isActive) cleanFilter();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Filter, {\n    type: \"list\",\n    more: true,\n    isMobile: isMobile,\n    label: label,\n    noModal: noModal,\n    onOpen: function onOpen() {\n      return !isMobile && setValueOpen(true);\n    },\n    isOpen: valueOpen,\n    onClose: handleClose,\n    onApply: function onApply() {\n      return handleApply();\n    },\n    items: handerFilters(),\n    onReset: function onReset() {\n      return handlerReset();\n    },\n    isActive: item.isActive,\n    sufix: \"- Mais Filtros\",\n    value: item.value,\n    qtdFilters: filterActives().length // value={filterActives().length === 1 ? [1] : filterActives()}\n    ,\n    disabled: !filterActives().length > 0,\n    header: header,\n    className: className,\n    height: height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(FilterMore, \"uUnUwFPOy9gRAb2ctb9a00K3nk4=\");\n\n_c = FilterMore;\nFilterMore.defaultProps = {\n  onApply: function onApply() {},\n  onActives: function onActives() {},\n  isOpen: false,\n  isMobile: false,\n  label: \"\",\n  noModal: false,\n  header: \"\",\n  filters: []\n};\nFilterMore.propTypes = {\n  isOpen: PropTypes.bool,\n  filters: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.string,\n    label: PropTypes.string,\n    field: PropTypes.string\n  })),\n  onActives: PropTypes.func,\n  onApply: PropTypes.func,\n  isMobile: PropTypes.bool,\n  label: PropTypes.string,\n  noModal: PropTypes.bool,\n  header: PropTypes.string\n};\nFilterMore.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"FilterMore\",\n  \"props\": {\n    \"onApply\": {\n      \"defaultValue\": {\n        \"value\": \"() => { }\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"onActives\": {\n      \"defaultValue\": {\n        \"value\": \"() => { }\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"isOpen\": {\n      \"defaultValue\": {\n        \"value\": \"false\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"isMobile\": {\n      \"defaultValue\": {\n        \"value\": \"false\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"label\": {\n      \"defaultValue\": {\n        \"value\": \"\\\"\\\"\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"noModal\": {\n      \"defaultValue\": {\n        \"value\": \"false\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"header\": {\n      \"defaultValue\": {\n        \"value\": \"\\\"\\\"\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"filters\": {\n      \"defaultValue\": {\n        \"value\": \"[]\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"arrayOf\",\n        \"value\": {\n          \"name\": \"shape\",\n          \"value\": {\n            \"type\": {\n              \"name\": \"string\",\n              \"required\": false\n            },\n            \"label\": {\n              \"name\": \"string\",\n              \"required\": false\n            },\n            \"field\": {\n              \"name\": \"string\",\n              \"required\": false\n            }\n          }\n        }\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};\nexport default FilterMore;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilterMore\");\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\FilterMore\\\\FilterMore.js\"] = {\n    name: \"FilterMore\",\n    docgenInfo: FilterMore.__docgenInfo,\n    path: \"src\\\\FilterMore\\\\FilterMore.js\"\n  };\n}","map":{"version":3,"sources":["C:/Users/felip/OneDrive/Dokumente/cvc/core-master/src/FilterMore/FilterMore.js"],"names":["React","useState","useEffect","PropTypes","FilterOption","FilterText","FilterGrid","FilterRange","Filter","Filters","uuidv4","require","FilterMore","isOpen","filters","onApply","isMobile","label","noModal","header","className","onActives","height","item","valueOpen","setValueOpen","items","setItems","fts","map","ft","type","rangeValue","Object","assign","rangeTitleValues","min","max","rangeTextValues","open","filterActives","filter","isActive","cleanFilter","forEach","index","RANGE","OPTIONS","options","option","checked","GRID","TEXT","value","handlerReset","length","handerFilters","it","_item","itemChange","handleApply","handleClose","defaultProps","propTypes","bool","arrayOf","shape","string","field","func"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FilterOption from \"../FilterOption/FilterOption\";\nimport FilterText from \"../FilterText/FilterText\";\nimport FilterGrid from \"../FilterGrid/FilterGrid\";\nimport FilterRange from \"../FilterEngine/_FilterRange\";\nimport Filter from \"../Filter\";\nimport Filters from \"../Constants\";\n\nconst uuidv4 = require(\"uuid/v4\");\n\nconst FilterMore = ({\n    isOpen,\n    filters,\n    onApply,\n    isMobile,\n    label,\n    noModal,\n    header,\n    className,\n    onActives,\n    height,\n    item,\n}) => {\n    const [valueOpen, setValueOpen] = useState(false);\n    const [items, setItems] = useState([]);\n\n    useEffect(() => {\n        setValueOpen(isOpen);\n    }, [isOpen]);\n\n    useEffect(() => {\n        let fts = [...filters];\n\n        fts = fts.map(ft => {\n            if (ft.type === \"range\" && !ft.rangeValue) {\n                Object.assign(ft, { rangeTitleValues: { min: ft.min, max: ft.max } });\n                Object.assign(ft, { rangeValue: { min: ft.min, max: ft.max } });\n                Object.assign(ft, { rangeTextValues: { min: ft.min, max: ft.max } });\n                Object.assign(ft, { open: false });\n            }\n            return ft;\n        });\n\n        setItems([...fts]);\n    }, [filters]);\n\n    const filterActives = () => items.filter(filter => filter.isActive);\n\n    const cleanFilter = () => {\n        items.forEach((filter, index) => {\n            if (filter.type === Filters.RANGE) {\n                items[index].rangeValue = {\n                    min: items[index].min,\n                    max: items[index].max,\n                };\n                items[index].rangeTextValues = {\n                    min: items[index].min,\n                    max: items[index].max,\n                };\n                items[index].isActive = false;\n            }\n            if (filter.type === Filters.OPTIONS) {\n                filter.options.forEach(option => {\n                    Object.assign(option, { checked: false });\n                });\n                items[index].isActive = false;\n            }\n\n            if (filter.type === Filters.GRID) {\n                filter.options.forEach(option => {\n                    Object.assign(option, { checked: false });\n                });\n                items[index].isActive = false;\n            }\n\n            if (filter.type === Filters.TEXT) {\n                Object.assign(filter, { value: \"\" });\n                items[index].isActive = false;\n            }\n        });\n\n        setItems([...items]);\n    };\n\n    const handlerReset = () => {\n        cleanFilter();\n        onApply(items);\n        onActives(filterActives().length);\n    };\n\n\n\n    const handerFilters = () => {\n        const it = items.map((item, index) => {\n            if (item.type === Filters.RANGE) {\n                return (\n                    <FilterRange\n                        key={uuidv4()}\n                        onChange={_item => {\n                            items[index] = _item;\n                            setItems([...items]);\n                        }}\n                        values={{ min: item.rangeValue.min, max: item.rangeValue.max }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                        noModal\n                        isMobile={isMobile}\n                        index={index}\n                        filters={items}\n                        filter={item}\n                    />\n                );\n            }\n            if (item.type === Filters.OPTIONS) {\n                return (\n                    <FilterOption\n                        key={uuidv4()}\n                        isMobile={isMobile}\n                        noModal\n                        onChange={(itemChange, options) => {\n                            Object.assign(items[index].options, options);\n                            setItems([...items]);\n                        }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                        items={item.options}\n                        label={item.label}\n                    />\n                );\n            }\n            if (item.type === Filters.GRID) {\n                return (\n                    <FilterGrid\n                        isMobile={isMobile}\n                        noModal\n                        label={item.label}\n                        isAmenities\n                        items={item.options}\n                        onChange={(itemChange, options) => {\n                            Object.assign(items[index].options, options);\n                            setItems([...items]);\n                        }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                    />\n                );\n            }\n            if (item.type === Filters.TEXT) {\n                return (\n                    <FilterText\n                        onChange={value => {\n                            items[index].value = value;\n                            setItems([...items]);\n                        }}\n                        onActive={isActive => {\n                            items[index].isActive = isActive;\n                            setItems([...items]);\n                        }}\n                        value={item.value}\n                        label={item.label}\n                        noModal\n                    />\n                );\n            }\n            return [];\n        });\n        return it;\n    };\n\n    const handleApply = () => {\n        onApply(items);\n        onActives(filterActives().length);\n        setValueOpen(false);\n    };\n\n    // const value =\n    //   item.filterTitle && item.filterTitle.length > 0 ? item.filterTitle : [\"\"];\n    // const isActive =\n    //   isMobile || !item.filterTitle ? false : filterActives().length > 0;\n\n    const handleClose = () => {\n        if (!isMobile) setValueOpen(false);\n        if (!item.isActive) cleanFilter();\n    };\n\n    return (\n        <Filter\n            type=\"list\"\n            more\n            isMobile={isMobile}\n            label={label}\n            noModal={noModal}\n            onOpen={() => !isMobile && setValueOpen(true)}\n            isOpen={valueOpen}\n            onClose={handleClose}\n            onApply={() => handleApply()}\n            items={handerFilters()}\n            onReset={() => handlerReset()}\n            isActive={item.isActive}\n            sufix=\"- Mais Filtros\"\n            value={item.value}\n            qtdFilters={filterActives().length}\n            // value={filterActives().length === 1 ? [1] : filterActives()}\n            disabled={!filterActives().length > 0}\n            header={header}\n            className={className}\n            height={height}\n        />\n    );\n};\n\nFilterMore.defaultProps = {\n    onApply: () => { },\n    onActives: () => { },\n    isOpen: false,\n    isMobile: false,\n    label: \"\",\n    noModal: false,\n    header: \"\",\n    filters: [],\n};\n\nFilterMore.propTypes = {\n    isOpen: PropTypes.bool,\n    filters: PropTypes.arrayOf(\n        PropTypes.shape({\n            type: PropTypes.string,\n            label: PropTypes.string,\n            field: PropTypes.string,\n        })\n    ),\n    onActives: PropTypes.func,\n    onApply: PropTypes.func,\n    isMobile: PropTypes.bool,\n    label: PropTypes.string,\n    noModal: PropTypes.bool,\n    header: PropTypes.string,\n};\n\nexport default FilterMore;\n"]},"metadata":{},"sourceType":"module"}