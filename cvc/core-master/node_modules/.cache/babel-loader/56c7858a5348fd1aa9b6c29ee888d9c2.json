{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\felip\\\\OneDrive\\\\Dokumente\\\\cvc\\\\core-master\\\\src\\\\MyTravelLogin\\\\UserAccessSteps\\\\AlmostThere\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n\n/* eslint-disable react-hooks/rules-of-hooks */\n\n/* eslint-disable no-useless-escape */\n\n/* eslint-disable no-extra-boolean-cast */\nimport React, { useRef, useCallback, useEffect } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport * as Yup from \"yup\";\nimport { useProfileContext } from \"../../../ProfileContext\";\nimport { useUserDataContext } from \"../../../UserContext\";\nimport { useToast } from \"../../contexts/Toast\";\nimport Checkbox from \"../../shared/components/Checkbox\";\nimport Form from \"../../shared/components/Form\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport Input from \"../../shared/components/Input\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport SubTitle from \"../../shared/components/SubTitle\";\nimport Title from \"../../shared/components/Title\";\nimport getValidationErrors from \"../../shared/utils/getValidationErrors\";\nimport Redirect from \"../../shared/utils/Redirect\";\nimport useStyles from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar AlmostThere = function AlmostThere(_ref) {\n  _s();\n\n  var intl = _ref.intl,\n      isModal = _ref.isModal,\n      onCloseClick = _ref.onCloseClick;\n  var almostThereTitle = intl.formatMessage({\n    id: \"AlmostThere.almostThereTitle\"\n  });\n  var almostReadyTitle = intl.formatMessage({\n    id: \"AlmostThere.almostReadyTitle\"\n  });\n  var almostThereSubTitle = intl.formatMessage({\n    id: \"AlmostThere.almostThereSubTitle\"\n  });\n  var almostReadySubTitle = intl.formatMessage({\n    id: \"AlmostThere.almostReadySubTitle\"\n  });\n  var inputPlaceholderBirthdate = intl.formatMessage({\n    id: \"AlmostThere.inputPlaceholderBirthdate\"\n  });\n  var inputPlaceholderCPF = intl.formatMessage({\n    id: \"AlmostThere.inputPlaceholderCPF\"\n  });\n  var inputInfoCPF = intl.formatMessage({\n    id: \"AlmostThere.inputInfoCPF\"\n  });\n  var inputPlaceholderPhone = intl.formatMessage({\n    id: \"AlmostThere.inputPlaceholderPhone\"\n  });\n  var inputPlaceholderName = intl.formatMessage({\n    id: \"AlmostThere.inputPlaceholderName\"\n  });\n  var errorBirthdateIsRequired = intl.formatMessage({\n    id: \"AlmostThere.errorBirthdateIsRequired\"\n  });\n  var errorInvalidFormmat = intl.formatMessage({\n    id: \"AlmostThere.errorInvalidFormmat\"\n  });\n  var errorPhoneIsRequired = intl.formatMessage({\n    id: \"AlmostThere.errorPhoneIsRequired\"\n  });\n  var errorCpfIsRequired = intl.formatMessage({\n    id: \"AlmostThere.errorCpfIsRequired\"\n  });\n  var errorNameIsRequired = intl.formatMessage({\n    id: \"AlmostThere.errorNameIsRequired\"\n  });\n  var termsAndConditionsPart1 = intl.formatMessage({\n    id: \"AlmostThere.termsAndConditionsPart1\"\n  });\n  var termsAndConditionsPart2 = intl.formatMessage({\n    id: \"AlmostThere.termsAndConditionsPart2\"\n  });\n  var termsAndConditionsPart3 = intl.formatMessage({\n    id: \"AlmostThere.termsAndConditionsPart3\"\n  });\n  var termsAndConditionsPart4 = intl.formatMessage({\n    id: \"AlmostThere.termsAndConditionsPart4\"\n  });\n  var termsAndConditionsPart5 = intl.formatMessage({\n    id: \"AlmostThere.termsAndConditionsPart5\"\n  });\n  var almostThereActionButton = intl.formatMessage({\n    id: \"AlmostThere.almostThereActionButton\"\n  });\n  var almostReadyActionButton = intl.formatMessage({\n    id: \"AlmostThere.almostReadyActionButton\"\n  });\n  var successToastMessageTitle = intl.formatMessage({\n    id: \"AlmostThere.successToastMessageTitle\"\n  });\n  var successToastMessageDescription = intl.formatMessage({\n    id: \"AlmostThere.successToastMessageDescription\"\n  });\n  var errorMessageTitle = intl.formatMessage({\n    id: \"AlmostThere.errorMessageTitle\"\n  });\n  var errorMessageDescription = intl.formatMessage({\n    id: \"AlmostThere.errorMessageDescription\"\n  });\n  var formRef = useRef(null);\n\n  var _useProfileContext = useProfileContext(),\n      patchProfile = _useProfileContext.patchProfile,\n      profileData = _useProfileContext.profileData,\n      setIsPatchProfileScreenToggle = _useProfileContext.setIsPatchProfileScreenToggle,\n      isRegisterUserProfileStep = _useProfileContext.isRegisterUserProfileStep,\n      setIsRegisterUserProfileStepToggle = _useProfileContext.setIsRegisterUserProfileStepToggle;\n\n  var _useUserDataContext = useUserDataContext(),\n      isUserAuth = _useUserDataContext.isUserAuth,\n      isConfig = _useUserDataContext.isConfig,\n      setIsUserAuth = _useUserDataContext.setIsUserAuth,\n      logout = _useUserDataContext.logout;\n\n  var classes = useStyles({});\n\n  var _useToast = useToast(),\n      addToast = _useToast.addToast;\n\n  useEffect(function () {\n    setIsRegisterUserProfileStepToggle(true);\n  }, [setIsRegisterUserProfileStepToggle]);\n  useEffect(function () {\n    setIsPatchProfileScreenToggle(true);\n  }, [setIsPatchProfileScreenToggle]);\n  useEffect(function () {\n    if (isConfig) {\n      var isAuth = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  setIsUserAuth(isUserAuth);\n\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function isAuth() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      isAuth();\n    }\n  }, [isConfig, isUserAuth]);\n  var contact = profileData.contact,\n      acceptedMaisCVC = profileData.acceptedMaisCVC,\n      birthdate = profileData.birthdate,\n      name = profileData.name,\n      cpf = profileData.cpf;\n  useEffect(function () {\n    var _formRef$current, _formRef$current2, _formRef$current4;\n\n    if (name) formRef === null || formRef === void 0 ? void 0 : (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setFieldValue(\"name\", name);\n    if (cpf) formRef === null || formRef === void 0 ? void 0 : (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.setFieldValue(\"cpf\", cpf);\n\n    if (birthdate) {\n      var _formRef$current3;\n\n      var replacedBirthdate = birthdate.replaceAll(\"-\", \"/\");\n      var invertedBirthdate = replacedBirthdate.split(\"/\").reverse().join(\"/\");\n      formRef === null || formRef === void 0 ? void 0 : (_formRef$current3 = formRef.current) === null || _formRef$current3 === void 0 ? void 0 : _formRef$current3.setFieldValue(\"birthdate\", invertedBirthdate);\n    }\n\n    if (contact && contact.phones && contact.phones.length > 0) formRef === null || formRef === void 0 ? void 0 : (_formRef$current4 = formRef.current) === null || _formRef$current4 === void 0 ? void 0 : _formRef$current4.setFieldValue(\"phone\", contact.phones[0].phoneNumber);\n  }, [birthdate, contact, cpf, name]);\n  var submitForm = useCallback( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(formData) {\n      var _formRef$current5, schema, replacedBirthdate, invertedBirthdate, formmatedBirthdate, postData, _formRef$current6;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              (_formRef$current5 = formRef.current) === null || _formRef$current5 === void 0 ? void 0 : _formRef$current5.setErrors({});\n              schema = Yup.object().shape({\n                name: Yup.string().required(errorNameIsRequired),\n                cpf: Yup.string().min(14, errorInvalidFormmat).required(errorCpfIsRequired),\n                birthdate: Yup.string().min(10, errorInvalidFormmat).required(errorBirthdateIsRequired),\n                phone: Yup.string().required(errorPhoneIsRequired)\n              });\n              _context3.next = 5;\n              return schema.validate(formData, {\n                abortEarly: false\n              });\n\n            case 5:\n              replacedBirthdate = formData.birthdate.replaceAll(\"/\", \"-\");\n              invertedBirthdate = replacedBirthdate.split(\"-\").reverse().join(\"-\");\n              formmatedBirthdate = invertedBirthdate;\n              postData = {\n                name: formData.name,\n                birthdate: formmatedBirthdate,\n                contact: {\n                  emails: [],\n                  phones: [{\n                    type: \"PERSONAL\",\n                    phoneNumber: formData.phone\n                  }]\n                },\n                cpf: formData.cpf,\n                acceptedMaisCVC: formData.acceptedMaisCVC\n              };\n              _context3.next = 11;\n              return patchProfile(postData);\n\n            case 11:\n              setIsUserAuth(true);\n              addToast({\n                type: \"success\",\n                title: successToastMessageTitle,\n                description: successToastMessageDescription\n              });\n\n              if (isModal) {\n                setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          if (onCloseClick) {\n                            onCloseClick();\n                          }\n\n                        case 1:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                })), 3000);\n              } else {\n                window.location.href = Redirect();\n              }\n\n              _context3.next = 20;\n              break;\n\n            case 16:\n              _context3.prev = 16;\n              _context3.t0 = _context3[\"catch\"](0);\n              addToast({\n                type: \"error\",\n                title: errorMessageTitle,\n                description: errorMessageDescription\n              });\n\n              if (_context3.t0 instanceof Yup.ValidationError) {\n                (_formRef$current6 = formRef.current) === null || _formRef$current6 === void 0 ? void 0 : _formRef$current6.setErrors(getValidationErrors(_context3.t0));\n              }\n\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 16]]);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [addToast, isModal, onCloseClick, patchProfile, setIsUserAuth]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderLogin, {\n      isModal: isModal,\n      previousStep: \"MainScreen\",\n      onCloseClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!onCloseClick) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                _context4.next = 3;\n                return logout({\n                  noReload: true\n                });\n\n              case 3:\n                onCloseClick();\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        ref: formRef,\n        handleSubmit: submitForm,\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: isRegisterUserProfileStep ? almostReadyTitle : almostThereTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(SubTitle, {\n          className: classes.subTitle,\n          children: isRegisterUserProfileStep ? almostReadySubTitle : almostThereSubTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputWrapper,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            name: \"name\",\n            placeholderText: inputPlaceholderName,\n            shrink: !!name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputWrapper,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            name: \"cpf\",\n            placeholderText: inputPlaceholderCPF,\n            hasMask: true,\n            mask: !!cpf ? \"\\\\*\\\\*\\\\*.\\\\*\\\\*\\\\*.99\\\\*-9\\\\*\" : \"999.999.999-99\",\n            autoComplete: \"off\",\n            shrink: !!cpf,\n            disabledInput: !!cpf,\n            showTip: true,\n            infoMessage: inputInfoCPF\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputWrapper,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            name: \"birthdate\",\n            placeholderText: inputPlaceholderBirthdate,\n            hasMask: true,\n            mask: \"99/99/9999\",\n            shrink: !!birthdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputWrapper,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            name: \"phone\",\n            placeholderText: inputPlaceholderPhone,\n            hasMask: true,\n            mask: \"(99) 999999999\",\n            shrink: contact && (contact === null || contact === void 0 ? void 0 : contact.phones) && contact.phones.length > 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 17\n        }, _this), !acceptedMaisCVC && /*#__PURE__*/_jsxDEV(Checkbox, {\n          name: \"acceptedMaisCVC\",\n          value: \"consent\",\n          label: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"\".concat(termsAndConditionsPart1, \" \"), /*#__PURE__*/_jsxDEV(\"a\", {\n              target: \"_blank\",\n              href: \"https://qa.cvc.com.br/cartao-de-credito-cvc\",\n              rel: \"noreferrer\",\n              children: [\" \", \"\".concat(termsAndConditionsPart2, \" \")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 60\n            }, _this), \"\".concat(termsAndConditionsPart3, \" \"), /*#__PURE__*/_jsxDEV(\"a\", {\n              target: \"_blank\",\n              href: \"https://cartaoitau.cvc.com.br/maiscvc_regulamento.pdf\",\n              rel: \"noreferrer\",\n              children: \"\".concat(termsAndConditionsPart4, \" \")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 214\n            }, _this), \"\".concat(termsAndConditionsPart5)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.internalButtonWrapper,\n          children: /*#__PURE__*/_jsxDEV(InternalButton, {\n            type: \"submit\",\n            text: isRegisterUserProfileStep ? almostReadyActionButton : almostThereActionButton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(AlmostThere, \"X7fjoxXwZQ7mzc9r0/Nag/EySKE=\", false, function () {\n  return [useProfileContext, useUserDataContext, useStyles, useToast];\n});\n\n_c = AlmostThere;\nexport default _c2 = injectIntl(AlmostThere);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AlmostThere\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/felip/OneDrive/Dokumente/cvc/core-master/src/MyTravelLogin/UserAccessSteps/AlmostThere/index.tsx"],"names":["React","useRef","useCallback","useEffect","injectIntl","Yup","useProfileContext","useUserDataContext","useToast","Checkbox","Form","HeaderLogin","Input","InternalButton","SubTitle","Title","getValidationErrors","Redirect","useStyles","AlmostThere","intl","isModal","onCloseClick","almostThereTitle","formatMessage","id","almostReadyTitle","almostThereSubTitle","almostReadySubTitle","inputPlaceholderBirthdate","inputPlaceholderCPF","inputInfoCPF","inputPlaceholderPhone","inputPlaceholderName","errorBirthdateIsRequired","errorInvalidFormmat","errorPhoneIsRequired","errorCpfIsRequired","errorNameIsRequired","termsAndConditionsPart1","termsAndConditionsPart2","termsAndConditionsPart3","termsAndConditionsPart4","termsAndConditionsPart5","almostThereActionButton","almostReadyActionButton","successToastMessageTitle","successToastMessageDescription","errorMessageTitle","errorMessageDescription","formRef","patchProfile","profileData","setIsPatchProfileScreenToggle","isRegisterUserProfileStep","setIsRegisterUserProfileStepToggle","isUserAuth","isConfig","setIsUserAuth","logout","classes","addToast","isAuth","contact","acceptedMaisCVC","birthdate","name","cpf","current","setFieldValue","replacedBirthdate","replaceAll","invertedBirthdate","split","reverse","join","phones","length","phoneNumber","submitForm","formData","setErrors","schema","object","shape","string","required","min","phone","validate","abortEarly","formmatedBirthdate","postData","emails","type","title","description","setTimeout","window","location","href","ValidationError","noReload","root","subTitle","inputWrapper","internalButtonWrapper"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable react-hooks/rules-of-hooks */\n/* eslint-disable no-useless-escape */\n/* eslint-disable no-extra-boolean-cast */\nimport React, { useRef, useCallback, useEffect } from \"react\";\nimport { FormHandles } from \"@unform/core\";\nimport { injectIntl, IntlShape } from \"react-intl\";\nimport * as Yup from \"yup\";\nimport {useProfileContext} from \"../../../ProfileContext\"\nimport { IPatchProfile } from \"../../../ProfileContext/types\";\nimport { useUserDataContext } from \"../../../UserContext\";\nimport { useToast } from \"../../contexts/Toast\";\nimport Checkbox from \"../../shared/components/Checkbox\";\nimport Form from \"../../shared/components/Form\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport Input from \"../../shared/components/Input\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport SubTitle from \"../../shared/components/SubTitle\";\nimport Title from \"../../shared/components/Title\";\nimport getValidationErrors from \"../../shared/utils/getValidationErrors\";\nimport Redirect from \"../../shared/utils/Redirect\";\nimport useStyles from \"./styles\";\n\ninterface IFormData {\n    name: string\n    cpf: string\n    birthdate: string\n    phone: string\n    acceptedMaisCVC: boolean\n}\n\ninterface AlmostThereProps  {\n    onCloseClick?(): void;\n    isModal?: boolean;\n    intl: IntlShape;\n}\n\nconst AlmostThere: React.FC<AlmostThereProps> = ({ intl, isModal, onCloseClick }) => {\n    const almostThereTitle = intl.formatMessage({ id: \"AlmostThere.almostThereTitle\" });\n    const almostReadyTitle = intl.formatMessage({ id: \"AlmostThere.almostReadyTitle\" });\n    const almostThereSubTitle = intl.formatMessage({ id: \"AlmostThere.almostThereSubTitle\" });\n    const almostReadySubTitle = intl.formatMessage({ id: \"AlmostThere.almostReadySubTitle\" });\n    const inputPlaceholderBirthdate = intl.formatMessage({ id: \"AlmostThere.inputPlaceholderBirthdate\" });\n    const inputPlaceholderCPF = intl.formatMessage({ id: \"AlmostThere.inputPlaceholderCPF\" });\n    const inputInfoCPF = intl.formatMessage({ id: \"AlmostThere.inputInfoCPF\" });\n    const inputPlaceholderPhone = intl.formatMessage({ id: \"AlmostThere.inputPlaceholderPhone\" });\n    const inputPlaceholderName = intl.formatMessage({ id: \"AlmostThere.inputPlaceholderName\" });\n    const errorBirthdateIsRequired = intl.formatMessage({ id: \"AlmostThere.errorBirthdateIsRequired\" });\n    const errorInvalidFormmat = intl.formatMessage({ id: \"AlmostThere.errorInvalidFormmat\" });\n    const errorPhoneIsRequired = intl.formatMessage({ id: \"AlmostThere.errorPhoneIsRequired\" });\n    const errorCpfIsRequired = intl.formatMessage({ id: \"AlmostThere.errorCpfIsRequired\" });\n    const errorNameIsRequired = intl.formatMessage({ id: \"AlmostThere.errorNameIsRequired\" });\n    const termsAndConditionsPart1 = intl.formatMessage({ id: \"AlmostThere.termsAndConditionsPart1\" });\n    const termsAndConditionsPart2 = intl.formatMessage({ id: \"AlmostThere.termsAndConditionsPart2\" });\n    const termsAndConditionsPart3 = intl.formatMessage({ id: \"AlmostThere.termsAndConditionsPart3\" });\n    const termsAndConditionsPart4 = intl.formatMessage({ id: \"AlmostThere.termsAndConditionsPart4\" });\n    const termsAndConditionsPart5 = intl.formatMessage({ id: \"AlmostThere.termsAndConditionsPart5\" });\n    const almostThereActionButton = intl.formatMessage({ id: \"AlmostThere.almostThereActionButton\" });\n    const almostReadyActionButton = intl.formatMessage({ id: \"AlmostThere.almostReadyActionButton\" });\n    const successToastMessageTitle = intl.formatMessage({ id: \"AlmostThere.successToastMessageTitle\" });\n    const successToastMessageDescription = intl.formatMessage({ id: \"AlmostThere.successToastMessageDescription\" });\n    const errorMessageTitle = intl.formatMessage({ id: \"AlmostThere.errorMessageTitle\" });\n    const errorMessageDescription = intl.formatMessage({ id: \"AlmostThere.errorMessageDescription\" });\n\n    const formRef = useRef<FormHandles>(null);\n\n    const {\n        patchProfile,\n        profileData,\n        setIsPatchProfileScreenToggle,\n        isRegisterUserProfileStep,\n        setIsRegisterUserProfileStepToggle\n    } = useProfileContext()\n\n    const { isUserAuth, isConfig, setIsUserAuth, logout } = useUserDataContext();\n\n    const classes = useStyles({});\n    const {addToast} = useToast()\n\n    useEffect(() => {\n        setIsRegisterUserProfileStepToggle(true)\n    }, [setIsRegisterUserProfileStepToggle]);\n\n    useEffect(() => {\n        setIsPatchProfileScreenToggle(true)\n    },[setIsPatchProfileScreenToggle])\n\n    useEffect(() => {\n        if (isConfig) {\n            const isAuth = async () => {\n                setIsUserAuth(isUserAuth);\n            };\n            isAuth();\n        }\n    }, [isConfig, isUserAuth]);\n\n    const { contact, acceptedMaisCVC, birthdate, name, cpf} = profileData\n\n    useEffect(() => {\n        if(name) formRef?.current?.setFieldValue(\"name\", name)\n        if (cpf) formRef?.current?.setFieldValue(\"cpf\", cpf);\n        if (birthdate){\n            const replacedBirthdate = birthdate.replaceAll(\"-\", \"/\")\n            const invertedBirthdate = replacedBirthdate.split(\"/\").reverse().join(\"/\")\n            formRef?.current?.setFieldValue(\"birthdate\", invertedBirthdate);\n        }\n        if(contact && contact.phones && contact.phones.length > 0) formRef?.current?.setFieldValue(\"phone\", contact.phones[0].phoneNumber);\n    }, [ birthdate, contact, cpf, name])\n\n    const submitForm =\n        useCallback(async (formData: IFormData) => {\n            try {\n                formRef.current?.setErrors({});\n\n                const schema = Yup.object().shape({\n                    name: Yup.string().required(errorNameIsRequired),\n                    cpf: Yup.string().min(14, errorInvalidFormmat).required(errorCpfIsRequired),\n                    birthdate: Yup.string().min(10, errorInvalidFormmat).required(errorBirthdateIsRequired),\n                    phone: Yup.string().required(errorPhoneIsRequired),\n                });\n\n                await schema.validate(formData, {\n                    abortEarly: false,\n                });\n\n                const replacedBirthdate = formData.birthdate.replaceAll(\"/\", \"-\")\n                const invertedBirthdate = replacedBirthdate.split(\"-\").reverse().join(\"-\")\n\n                const formmatedBirthdate = invertedBirthdate\n\n                const postData: IPatchProfile = {\n                    name: formData.name,\n                    birthdate: formmatedBirthdate,\n                    contact: {\n                        emails: [],\n                        phones: [{\n                            type: \"PERSONAL\",\n                            phoneNumber: formData.phone,\n                        }]\n                    },\n                    cpf: formData.cpf,\n                    acceptedMaisCVC: formData.acceptedMaisCVC,\n                }\n\n                await patchProfile(postData)\n                setIsUserAuth(true)\n                addToast({\n                    type: \"success\", title: successToastMessageTitle, description: successToastMessageDescription });\n\n                if (isModal) {\n                    setTimeout(async() => {\n                        if (onCloseClick) {\n                            onCloseClick();\n                        }\n                    }, 3000);\n                } else {\n                    window.location.href = Redirect();\n                }\n\n            } catch (err) {\n                addToast({\n                    type: \"error\", title: errorMessageTitle, description: errorMessageDescription });\n                if (err instanceof Yup.ValidationError) {\n                    formRef.current?.setErrors(getValidationErrors(err));\n\n                }\n            }\n        }, [addToast, isModal, onCloseClick, patchProfile, setIsUserAuth]);\n\n    return <>\n        <HeaderLogin isModal={isModal} previousStep=\"MainScreen\" onCloseClick={async() => {\n            if (onCloseClick) {\n                await logout({\n                    noReload: true\n                })\n                onCloseClick()\n            }\n        }} />\n\n        <div className={classes.root}>\n            <Form ref={formRef} handleSubmit={submitForm}>\n                <Title>\n                    {isRegisterUserProfileStep ? almostReadyTitle : almostThereTitle }\n                </Title>\n                <SubTitle className={classes.subTitle }>\n                    { isRegisterUserProfileStep ?\n                        almostReadySubTitle :\n                        almostThereSubTitle\n                    }\n                </SubTitle>\n                <div className={classes.inputWrapper}>\n                    <Input\n                        name=\"name\"\n                        placeholderText={inputPlaceholderName}\n                        shrink={!!name}\n                    />\n                </div>\n                <div className={classes.inputWrapper}>\n                    <Input\n                        name=\"cpf\"\n                        placeholderText={inputPlaceholderCPF}\n                        hasMask\n                        mask={!!cpf ? \"\\\\*\\\\*\\\\*.\\\\*\\\\*\\\\*.99\\\\*-9\\\\*\" : \"999.999.999-99\"}\n                        autoComplete=\"off\"\n                        shrink={!!cpf}\n                        disabledInput={!!cpf}\n                        showTip\n                        infoMessage={inputInfoCPF}\n                    />\n                </div>\n                <div className={classes.inputWrapper}>\n                    <Input\n                        name=\"birthdate\"\n                        placeholderText={inputPlaceholderBirthdate}\n                        hasMask\n                        mask=\"99/99/9999\"\n                        shrink={!!birthdate}\n                    />\n                </div>\n                <div className={classes.inputWrapper}>\n                    <Input\n                        name=\"phone\"\n                        placeholderText={inputPlaceholderPhone}\n                        hasMask\n                        mask=\"(99) 999999999\"\n                        shrink={(contact && contact?.phones && contact.phones.length > 0)}\n                    />\n\n                </div>\n                {!acceptedMaisCVC &&\n                    <Checkbox\n                        name=\"acceptedMaisCVC\"\n                        value=\"consent\"\n                        label={(<>\n                            {`${termsAndConditionsPart1} `}<a target=\"_blank\" href=\"https://qa.cvc.com.br/cartao-de-credito-cvc\" rel=\"noreferrer\"> {`${termsAndConditionsPart2} `}</a>{`${termsAndConditionsPart3} `}<a target=\"_blank\" href=\"https://cartaoitau.cvc.com.br/maiscvc_regulamento.pdf\" rel=\"noreferrer\">{`${termsAndConditionsPart4} `}</a>{`${termsAndConditionsPart5}`}\n                        </>)}\n                    />\n                }\n                <div className={classes.internalButtonWrapper}>\n                    <InternalButton type=\"submit\" text={isRegisterUserProfileStep ? almostReadyActionButton : almostThereActionButton } />\n                </div>\n            </Form>\n        </div>\n    </>\n\n};\n\nexport default injectIntl(AlmostThere);\n"]},"metadata":{},"sourceType":"module"}