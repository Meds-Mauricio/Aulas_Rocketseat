{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\felip\\\\OneDrive\\\\Dokumente\\\\cvc\\\\core-master\\\\src\\\\MyTravelLogin\\\\UserAccessSteps\\\\ProfileCorp\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect } from \"react\";\nimport { Typography, withWidth, Link } from \"@material-ui/core\";\nimport { isWidthDown } from \"@material-ui/core/withWidth\";\nimport Cookies from \"universal-cookie\";\nimport { BrandContext } from \"../../../BrandContext\";\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport { useLoadingContext } from \"../../contexts/LoadingContext\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport Loading from \"../../shared/components/Loading\";\nimport Terms from \"../../shared/components/Terms\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport api from \"../../shared/services/api\";\nimport { usersInProvider } from \"../MainScreen/utils\";\nimport { useProfileStyles } from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar ProfileCorp = function ProfileCorp(_ref) {\n  _s();\n\n  var width = _ref.width,\n      onCloseClick = _ref.onCloseClick,\n      isModal = _ref.isModal;\n\n  var _useUserData = useUserData(),\n      user = _useUserData.user;\n\n  var ctx = useContext(BrandContext);\n\n  var _useRenderSteps = useRenderSteps(),\n      renderNewStep = _useRenderSteps.renderNewStep,\n      setPreviousStep = _useRenderSteps.setPreviousStep,\n      previousStep = _useRenderSteps.previousStep;\n\n  var isMobile = isWidthDown(\"sm\", width);\n\n  var _useAuthAmplifyContex = useAuthAmplifyContext(),\n      setAuthAmplify = _useAuthAmplifyContex.setAuthAmplify;\n\n  var _useLoadingContext = useLoadingContext(),\n      setLoading = _useLoadingContext.setLoading,\n      loading = _useLoadingContext.loading;\n\n  var styles = useProfileStyles({\n    isMobile: isMobile\n  });\n\n  var handleNavigateToCorp = function handleNavigateToCorp() {\n    var environment = \"\";\n\n    if (window.location.href.includes(\"qa.\")) {\n      environment = \"qa.\";\n    } else if (window.location.href.includes(\"ti.\")) {\n      environment = \"ti.\";\n    } else if (window.location.href.includes(\"localhost\")) {\n      environment = \"ti.\";\n    }\n\n    var cookies = new Cookies();\n    cookies.set(\"corpAgentId\", btoa(user.email), {\n      path: \"/\"\n    });\n    window.open(\"https://\".concat(environment, \"cvc.com.br/venda-assistida/login\"), \"_blank\");\n  };\n\n  useEffect(function () {\n    setPreviousStep(\"MainScreen\");\n  }, []);\n\n  var handleNavigateAsUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var email, response, userExists;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              email = user.email;\n              _context.next = 4;\n              return api.get(\"/apigw/authentication/\".concat(ctx.brand, \"/user-exists?email=\").concat(email));\n\n            case 4:\n              response = _context.sent;\n              userExists = usersInProvider(response.data.found, true);\n              setLoading(false);\n              setPreviousStep(\"ProfileCorp\");\n\n              if (userExists === null || userExists === void 0 ? void 0 : userExists.nextStep) {\n                if (!userExists.emailConfirmed) {\n                  setAuthAmplify(\"confirmSignUp\");\n                }\n\n                renderNewStep(userExists.nextStep);\n              } else {\n                renderNewStep(\"ConfirmMainScreen\");\n              }\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleNavigateAsUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.root,\n      children: [/*#__PURE__*/_jsxDEV(HeaderLogin, {\n        isModal: isModal,\n        previousStep: previousStep,\n        onCloseClick: onCloseClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.centeredContent,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          children: \"Perfil Corporativo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          children: [\"Identificamos uma conta corporativa usando o e-mail \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: user.email || \"email@cvc.com.br\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 77\n          }, _this), \", sinalize abaixo com qual perfil voc\\xEA quer utilizar.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(InternalButton, {\n        type: \"button\",\n        text: \"Entrar com a conta corporativa\",\n        handlerClick: handleNavigateToCorp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Link, {\n        target: \"_blank\",\n        onClick: handleNavigateAsUser,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          style: {\n            fontWeight: 700,\n            fontSize: \"12px\"\n          },\n          children: \"Continuar como cliente CVC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Terms, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(ProfileCorp, \"5Cvasm0mBzu0fQCoiANku56fjkY=\", false, function () {\n  return [useUserData, useRenderSteps, useAuthAmplifyContext, useLoadingContext, useProfileStyles];\n});\n\n_c = ProfileCorp;\nexport default withWidth()(ProfileCorp);\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileCorp\");","map":{"version":3,"sources":["C:/Users/felip/OneDrive/Dokumente/cvc/core-master/src/MyTravelLogin/UserAccessSteps/ProfileCorp/index.tsx"],"names":["React","useContext","useEffect","Typography","withWidth","Link","isWidthDown","Cookies","BrandContext","useAuthAmplifyContext","useLoadingContext","useRenderSteps","HeaderLogin","InternalButton","Loading","Terms","useUserData","api","usersInProvider","useProfileStyles","ProfileCorp","width","onCloseClick","isModal","user","ctx","renderNewStep","setPreviousStep","previousStep","isMobile","setAuthAmplify","setLoading","loading","styles","handleNavigateToCorp","environment","window","location","href","includes","cookies","set","btoa","email","path","open","handleNavigateAsUser","get","brand","response","userExists","data","found","nextStep","emailConfirmed","root","centeredContent","fontWeight","fontSize"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { Typography, withWidth, Link } from \"@material-ui/core\";\nimport { WithWidth, isWidthDown } from \"@material-ui/core/withWidth\";\nimport Cookies from \"universal-cookie\";\nimport { BrandContext } from \"../../../BrandContext\";\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport { useLoadingContext } from \"../../contexts/LoadingContext\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport Loading from \"../../shared/components/Loading\";\nimport Terms from \"../../shared/components/Terms\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport api from \"../../shared/services/api\";\nimport { usersInProvider } from \"../MainScreen/utils\";\nimport { useProfileStyles } from \"./styles\";\n\ninterface Props extends WithWidth {\n    onCloseClick?(): void;\n    isModal?: boolean;\n}\n\nconst ProfileCorp: React.FC<Props> = ({ width, onCloseClick, isModal }) => {\n    const { user } = useUserData();\n    const ctx = useContext(BrandContext);\n    const { renderNewStep, setPreviousStep, previousStep } = useRenderSteps();\n    const isMobile = isWidthDown(\"sm\", width);\n    const { setAuthAmplify } = useAuthAmplifyContext();\n    const { setLoading, loading } = useLoadingContext();\n    const styles = useProfileStyles({\n        isMobile\n    });\n\n    const handleNavigateToCorp = () => {\n        let environment = \"\";\n        if (window.location.href.includes(\"qa.\")) {\n            environment = \"qa.\";\n        } else if (window.location.href.includes(\"ti.\")) {\n            environment = \"ti.\";\n        } else if (window.location.href.includes(\"localhost\")) {\n            environment = \"ti.\";\n        }\n\n        const cookies = new Cookies();\n        cookies.set(\"corpAgentId\", btoa(user.email), {\n            path: \"/\"\n        });\n\n        window.open(`https://${environment}cvc.com.br/venda-assistida/login`, \"_blank\");\n    };\n    useEffect(() => {\n        setPreviousStep(\"MainScreen\");\n    }, []);\n    const handleNavigateAsUser = async () => {\n        setLoading(true);\n        const { email } = user;\n\n        const response = await api.get(`/apigw/authentication/${ctx.brand}/user-exists?email=${email}`);\n\n        const userExists = usersInProvider(response.data.found, true);\n        setLoading(false);\n        setPreviousStep(\"ProfileCorp\");\n        if (userExists?.nextStep) {\n            if (!userExists.emailConfirmed) {\n                setAuthAmplify(\"confirmSignUp\");\n            }\n\n            renderNewStep(userExists.nextStep);\n        } else {\n            renderNewStep(\"ConfirmMainScreen\");\n        }\n    };\n    return loading ? (\n        <Loading />\n    ) : (\n        <>\n            <div className={styles.root}>\n                <HeaderLogin isModal={isModal} previousStep={previousStep} onCloseClick={onCloseClick} />\n                <div className={styles.centeredContent}>\n                    <Typography variant=\"subtitle1\">Perfil Corporativo</Typography>\n                    <Typography variant=\"body2\">\n                        Identificamos uma conta corporativa usando o e-mail <strong>{user.email || \"email@cvc.com.br\"}</strong>, sinalize abaixo com qual perfil você quer utilizar.\n                    </Typography>\n                </div>\n                <InternalButton type=\"button\" text=\"Entrar com a conta corporativa\" handlerClick={handleNavigateToCorp} />\n                <Link target=\"_blank\" onClick={handleNavigateAsUser}>\n                    <Typography variant=\"caption\" style={{ fontWeight: 700, fontSize: \"12px\" }}>\n                        Continuar como cliente CVC\n                    </Typography>\n                </Link>\n            </div>\n            <Terms />\n        </>\n    );\n};\n\nexport default withWidth()(ProfileCorp);\n"]},"metadata":{},"sourceType":"module"}