{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/felip/OneDrive/Dokumente/cvc/core-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\felip\\\\OneDrive\\\\Dokumente\\\\cvc\\\\core-master\\\\src\\\\MyTravelLogin\\\\UserAccessSteps\\\\UnverifiedAccount\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { Typography } from \"@material-ui/core\";\nimport { Auth } from \"aws-amplify\";\nimport { injectIntl } from \"react-intl\";\nimport useGa from \"../../../utils/useGa\";\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport { useLoadingContext } from \"../../contexts/LoadingContext\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport Loading from \"../../shared/components/Loading\";\nimport SubTitle from \"../../shared/components/SubTitle\";\nimport Terms from \"../../shared/components/Terms\";\nimport Title from \"../../shared/components/Title\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport translate from \"../../shared/i18n/translate\";\nimport useStyles from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar UnverifiedAccount = function UnverifiedAccount(_ref) {\n  _s();\n\n  var intl = _ref.intl,\n      onCloseClick = _ref.onCloseClick,\n      isModal = _ref.isModal;\n\n  var _useUserData = useUserData(),\n      user = _useUserData.user;\n\n  var _useRenderSteps = useRenderSteps(),\n      renderNewStep = _useRenderSteps.renderNewStep,\n      setPreviousStep = _useRenderSteps.setPreviousStep;\n\n  var _useLoadingContext = useLoadingContext(),\n      loading = _useLoadingContext.loading;\n\n  var _useGa = useGa(),\n      saveOnGa = _useGa.saveOnGa;\n\n  var _useAuthAmplifyContex = useAuthAmplifyContext(),\n      authAmplify = _useAuthAmplifyContex.authAmplify;\n\n  var classes = useStyles({});\n  useEffect(function () {\n    setPreviousStep(\"MainScreen\");\n  }, []);\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!(authAmplify == \"confirmSignUp\")) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 4;\n              return Auth.resendSignUp(user.email);\n\n            case 4:\n              renderNewStep(\"ValidationCode\");\n              saveOnGa({\n                event: \"login_event\",\n                category: \"Account\",\n                action: \"Registration\",\n                label: \"alert :: verify email\"\n              });\n              renderNewStep(\"ValidationCode\");\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.next = 11;\n              return Auth.forgotPassword(user.email);\n\n            case 11:\n              renderNewStep(\"ValidationCode\");\n\n            case 12:\n              _context.next = 16;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 16:\n              saveOnGa({\n                event: \"login_event\",\n                category: \"Account\",\n                action: \"Registration\",\n                label: \"alert :: verify email\"\n              });\n              renderNewStep(\"ValidationCode\");\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function handleClick() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 19\n  }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderLogin, {\n      isModal: isModal,\n      previousStep: \"MainScreen\",\n      onCloseClick: onCloseClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: translate({\n          id: \"UnverifiedAccount.title\"\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(SubTitle, {\n        children: translate({\n          id: \"UnverifiedAccount.subTitle\",\n          value: {\n            email: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: user ? user.email : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 40\n            }, _this)\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        style: {\n          fontWeight: \"bold\",\n          marginBottom: 7,\n          fontSize: 14\n        },\n        children: translate({\n          id: \"UnverifiedAccount.verifyNow\"\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(InternalButton, {\n        handlerClick: handleClick,\n        type: \"submit\",\n        text: intl.formatMessage({\n          id: \"UnverifiedAccount.textBtn\"\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Terms, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(UnverifiedAccount, \"iybYM5MXrdts8SZpKgGmvxcg5CA=\", false, function () {\n  return [useUserData, useRenderSteps, useLoadingContext, useGa, useAuthAmplifyContext, useStyles];\n});\n\n_c = UnverifiedAccount;\nexport default _c2 = injectIntl(UnverifiedAccount);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UnverifiedAccount\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/felip/OneDrive/Dokumente/cvc/core-master/src/MyTravelLogin/UserAccessSteps/UnverifiedAccount/index.tsx"],"names":["React","useEffect","Typography","Auth","injectIntl","useGa","useAuthAmplifyContext","useLoadingContext","useRenderSteps","HeaderLogin","InternalButton","Loading","SubTitle","Terms","Title","useUserData","translate","useStyles","UnverifiedAccount","intl","onCloseClick","isModal","user","renderNewStep","setPreviousStep","loading","saveOnGa","authAmplify","classes","handleClick","resendSignUp","email","event","category","action","label","forgotPassword","root","id","value","fontWeight","marginBottom","fontSize","formatMessage"],"mappings":"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","sourcesContent":["import React, { useRef, useContext, useCallback, useEffect } from \"react\";\nimport { Typography } from \"@material-ui/core\";\nimport { Auth } from \"aws-amplify\";\nimport { injectIntl, IntlShape } from \"react-intl\";\nimport useGa from \"../../../utils/useGa\"\nimport { useAuthAmplifyContext } from \"../../contexts/AmplifyContext\";\nimport { useLoadingContext } from \"../../contexts/LoadingContext\";\nimport { useRenderSteps } from \"../../contexts/renderSteps\";\nimport HeaderLogin from \"../../shared/components/HeaderLogin\";\nimport InternalButton from \"../../shared/components/InternalButton\";\nimport Loading from \"../../shared/components/Loading\";\nimport SubTitle from \"../../shared/components/SubTitle\";\nimport Terms from \"../../shared/components/Terms\";\nimport Title from \"../../shared/components/Title\";\nimport { useUserData } from \"../../shared/hooks/UserContext\";\nimport translate from \"../../shared/i18n/translate\";\nimport useStyles from \"./styles\";\n\ninterface SubmitFormData {\n    email: string;\n    name?: string;\n    lastName?: string;\n    userExists: boolean;\n}\n\ninterface IInternalLogin {\n    intl: IntlShape;\n    onCloseClick?(): void;\n    isModal?: boolean;\n}\n\nconst UnverifiedAccount: React.FC<IInternalLogin> = ({ intl, onCloseClick, isModal }) => {\n    const { user } = useUserData();\n    const { renderNewStep, setPreviousStep } = useRenderSteps();\n    const { loading } = useLoadingContext();\n    const { saveOnGa } = useGa();\n    const { authAmplify } = useAuthAmplifyContext();\n\n    const classes = useStyles({});\n\n    useEffect(() => {\n        setPreviousStep(\"MainScreen\");\n    }, []);\n\n    const handleClick = async () => {\n        try {\n            if (authAmplify == \"confirmSignUp\") {\n                await Auth.resendSignUp(user.email);\n                renderNewStep(\"ValidationCode\");\n                saveOnGa({\n                    event: \"login_event\",\n                    category: \"Account\",\n                    action: \"Registration\",\n                    label: \"alert :: verify email\"\n                });\n                renderNewStep(\"ValidationCode\")\n            } else {\n                await Auth.forgotPassword(user.email);\n                renderNewStep(\"ValidationCode\");\n            }\n        }catch(err) {\n            // handle error server\n        }\n        saveOnGa({\n            event: \"login_event\",\n            category: \"Account\",\n            action: \"Registration\",\n            label: \"alert :: verify email\"\n        });\n        renderNewStep(\"ValidationCode\")\n    }\n\n    return (\n        loading ? <Loading /> :\n            <>\n            <HeaderLogin isModal={isModal} previousStep=\"MainScreen\" onCloseClick={onCloseClick} />\n            <div className={classes.root}>\n                    <Title>\n                    {translate({\n                            id: \"UnverifiedAccount.title\",\n                        })}\n                </Title>\n                    <SubTitle>\n                    {translate({\n                            id: \"UnverifiedAccount.subTitle\",\n                            value: {\n                                email: <strong>{user ? user.email : \"\"}</strong>\n\n                            },\n                        })}\n                </SubTitle>\n                    <Typography variant=\"body1\" style={{ fontWeight: \"bold\", marginBottom: 7, fontSize: 14 }}>\n                    {translate({\n                            id: \"UnverifiedAccount.verifyNow\",\n                        })}\n                </Typography>\n\n                    <InternalButton handlerClick={handleClick} type=\"submit\" text={intl.formatMessage({ id: \"UnverifiedAccount.textBtn\" })} />\n\n                </div>\n            <Terms />\n        </>\n    );\n};\n\nexport default injectIntl(UnverifiedAccount);\n"]},"metadata":{},"sourceType":"module"}